(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{112:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.Comment = exports.DownvoteDisplay = exports.UpvoteDisplay = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__(1));\n\nvar _axios = _interopRequireDefault(__webpack_require__(11));\n\nvar _reactFontawesome = __webpack_require__(19);\n\nvar _freeSolidSvgIcons = __webpack_require__(20);\n\nvar _index = __webpack_require__(295);\n\nvar _reactQuill = _interopRequireDefault(__webpack_require__(296));\n\n__webpack_require__(399);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar post_comments_url = \'/post_comments\';\nvar get_comments_url = \'/get_comments\';\nvar update_comments_url = \'/update_comments\';\nvar num_comments = 10;\n/*\n* Expected data info:\n*   comment id\n*   user\n*   comments\n*   upvotes\n*   downvotes\n*   secondary\n* */\n// expects image and name\n\nvar FirstLevelCommentDataStructure = function FirstLevelCommentDataStructure() {\n  _classCallCheck(this, FirstLevelCommentDataStructure);\n\n  this.id = 0;\n  this.imageSource = \'\';\n  this.user = \'\';\n  this.comment = \'\';\n  this.upvoteNum = 0;\n  this.downvoteNum = 0;\n  this.secondaryComments = [];\n};\n\nvar SecondLevelCommentDataStructure = function SecondLevelCommentDataStructure() {\n  _classCallCheck(this, SecondLevelCommentDataStructure);\n\n  this.id = 0;\n  this.imageSource = \'\';\n  this.user = \'\';\n  this.comment = \'\';\n  this.upvoteNum = 0;\n  this.downvoteNum = 0;\n};\n\nvar UpvoteDisplay =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UpvoteDisplay, _Component);\n\n  function UpvoteDisplay(props) {\n    var _this;\n\n    _classCallCheck(this, UpvoteDisplay);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UpvoteDisplay).call(this, props));\n    _this.state = {\n      clicked: false\n    };\n    return _this;\n  }\n\n  _createClass(UpvoteDisplay, [{\n    key: "regulateNum",\n    value: function regulateNum() {\n      var prev_value = this.props.num;\n      console.log(prev_value);\n\n      if (this.state.clicked === false) {\n        this.setState({\n          clicked: true\n        });\n        this.props.updating_upvote(prev_value + 1);\n      } else {\n        this.setState({\n          clicked: false\n        });\n        this.props.updating_upvote(prev_value - 1);\n      }\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement("div", null, _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowUp,\n        className: \'UpvoteIcon\',\n        onClick: function onClick() {\n          return _this2.regulateNum();\n        }\n      }), _react.default.createElement("span", {\n        style: {\n          marginLeft: \'0.5em\'\n        }\n      }, this.props.num));\n    }\n  }]);\n\n  return UpvoteDisplay;\n}(_react.Component);\n\nexports.UpvoteDisplay = UpvoteDisplay;\n\nvar DownvoteDisplay =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(DownvoteDisplay, _Component2);\n\n  function DownvoteDisplay(props) {\n    var _this3;\n\n    _classCallCheck(this, DownvoteDisplay);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(DownvoteDisplay).call(this, props));\n    _this3.state = {\n      clicked: false\n    };\n    return _this3;\n  }\n\n  _createClass(DownvoteDisplay, [{\n    key: "regulateNum",\n    value: function regulateNum() {\n      var prev_value = this.props.num;\n\n      if (this.state.clicked === false) {\n        this.setState({\n          clicked: true\n        });\n        this.props.updating_downvote(prev_value - 1);\n      } else {\n        this.setState({\n          clicked: false\n        });\n        this.props.updating_downvote(prev_value + 1);\n      }\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this4 = this;\n\n      return _react.default.createElement("div", null, _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this4.regulateNum();\n        }\n      }), _react.default.createElement("span", {\n        style: {\n          marginLeft: \'0.5em\'\n        }\n      }, this.props.num));\n    }\n  }]);\n\n  return DownvoteDisplay;\n}(_react.Component);\n\nexports.DownvoteDisplay = DownvoteDisplay;\n\nvar UserInfo =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(UserInfo, _Component3);\n\n  function UserInfo() {\n    _classCallCheck(this, UserInfo);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UserInfo).apply(this, arguments));\n  }\n\n  _createClass(UserInfo, [{\n    key: "render",\n    value: function render() {\n      return _react.default.createElement("div", {\n        style: {\n          display: \'flex\',\n          flexDirection: \'row\'\n        }\n      }, _react.default.createElement("img", {\n        style: {\n          order: 1,\n          marginRight: \'1em\',\n          maxWidth: \'5em\',\n          maxHeight: \'5em\',\n          verticalAlign: \'middle\',\n          boxShadow: \'0 0 0.2em grey\'\n        },\n        src: this.props.src,\n        alt: this.props.user\n      }), _react.default.createElement("h4", {\n        style: {\n          order: 2,\n          verticalAlign: \'center\'\n        }\n      }, this.props.user));\n    }\n  }]);\n\n  return UserInfo;\n}(_react.Component);\n\nvar SecondLevelComment =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(SecondLevelComment, _Component4);\n\n  function SecondLevelComment() {\n    _classCallCheck(this, SecondLevelComment);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SecondLevelComment).apply(this, arguments));\n  }\n\n  _createClass(SecondLevelComment, [{\n    key: "render",\n    value: function render() {\n      var _this5 = this;\n\n      var curr_comment = this.props.comment_ref;\n      return _react.default.createElement("div", {\n        className: \'SecondLevelComment_content\'\n      }, _react.default.createElement("h4", null, _react.default.createElement("span", null, curr_comment.user)), _react.default.createElement("div", {\n        className: \'comment_flex\'\n      }, _react.default.createElement("div", {\n        className: \'comment_blockleft\'\n      }, _react.default.createElement(UpvoteDisplay, {\n        num: curr_comment.upvoteNum,\n        updating_upvote: function updating_upvote(val) {\n          return _this5.props.updating_upvote(curr_comment.id, val);\n        }\n      }), _react.default.createElement(DownvoteDisplay, {\n        num: curr_comment.downvoteNum,\n        updating_downvote: function updating_downvote(val) {\n          return _this5.props.updating_downvote(curr_comment.id, val);\n        }\n      })), _react.default.createElement("div", {\n        className: \'comment_blockright\'\n      }, _react.default.createElement("section", {\n        dangerouslySetInnerHTML: {\n          __html: curr_comment.comment\n        }\n      }))));\n    }\n  }]);\n\n  return SecondLevelComment;\n}(_react.Component);\n\nvar CommentEditor =\n/*#__PURE__*/\nfunction (_Component5) {\n  _inherits(CommentEditor, _Component5);\n\n  function CommentEditor(props) {\n    var _this6;\n\n    _classCallCheck(this, CommentEditor);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(CommentEditor).call(this, props));\n    _this6.state = {\n      text: \'\'\n    };\n    return _this6;\n  }\n\n  _createClass(CommentEditor, [{\n    key: "updateComment",\n    value: function updateComment() {\n      var _this7 = this;\n\n      var current_user = this.props.current_user;\n      var current_question_id = this.props.current_question_id; // this variable can be null/undefined!\n\n      var current_parent_id = this.props.current_parent_comment_id == null ? -1 : this.props.current_parent_comment_id;\n      var is_for_road_map = this.props.for_road_map === true ? 1 : 0;\n\n      _axios.default.post(post_comments_url, {\n        username: current_user,\n        question_id: current_question_id,\n        parent_comment_id: current_parent_id,\n        is_for_road_map: is_for_road_map,\n        content: this.state.text\n      }).then(function (response) {\n        console.log(\'Send comment to backend\', response.data);\n        var id = response.data[0];\n\n        _this7.props.updating_comment(id, _this7.state.text);\n      });\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this8 = this;\n\n      return _react.default.createElement("div", null, _react.default.createElement("div", null, _react.default.createElement(_reactQuill.default, {\n        theme: "snow",\n        value: this.state.text,\n        onChange: function onChange(value) {\n          return _this8.setState({\n            text: value\n          });\n        }\n      })), _react.default.createElement("button", {\n        onClick: function onClick() {\n          return _this8.updateComment();\n        }\n      }, "Submit"));\n    }\n  }]);\n\n  return CommentEditor;\n}(_react.Component);\n\nvar FirstLevelComment =\n/*#__PURE__*/\nfunction (_Component6) {\n  _inherits(FirstLevelComment, _Component6);\n\n  function FirstLevelComment(props) {\n    var _this9;\n\n    _classCallCheck(this, FirstLevelComment);\n\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(FirstLevelComment).call(this, props));\n    _this9.state = {\n      is_fold: true\n    };\n    return _this9;\n  }\n\n  _createClass(FirstLevelComment, [{\n    key: "render",\n    value: function render() {\n      var _this10 = this;\n\n      var curr_comment = this.props.comment_ref;\n      var img_source = curr_comment.imageSource;\n\n      if (img_source === \'\' || img_source === undefined || img_source === null) {\n        img_source = this.props.user_profile.userPicSource;\n      }\n\n      var secondary_comments = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = curr_comment.secondaryComments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var second_level_comment = _step.value;\n          secondary_comments.push(_react.default.createElement(SecondLevelComment, {\n            key: \'SecondLevelComment\' + second_level_comment.id,\n            comment_ref: second_level_comment,\n            updating_upvote: function updating_upvote(id, val) {\n              return _this10.props.updating_upvote(id, val);\n            },\n            updating_downvote: function updating_downvote(id, val) {\n              return _this10.props.updating_downvote(id, val);\n            }\n          }));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return _react.default.createElement("div", {\n        className: \'firstLevelComments_content\'\n      }, _react.default.createElement("div", null, _react.default.createElement("div", null, _react.default.createElement(UserInfo, {\n        src: img_source,\n        user: curr_comment.user\n      })), _react.default.createElement("div", {\n        className: \'comment_flex\'\n      }, _react.default.createElement("div", {\n        className: \'comment_blockleft\'\n      }, _react.default.createElement("div", null, _react.default.createElement(UpvoteDisplay, {\n        num: curr_comment.upvoteNum,\n        updating_upvote: function updating_upvote(val) {\n          return _this10.props.updating_upvote(curr_comment.id, val);\n        }\n      })), _react.default.createElement("div", null, _react.default.createElement(DownvoteDisplay, {\n        num: curr_comment.downvoteNum,\n        updating_downvote: function updating_downvote(val) {\n          return _this10.props.updating_downvote(curr_comment.id, val);\n        }\n      }))), _react.default.createElement("div", {\n        className: \'comment_blockright\'\n      }, _react.default.createElement("section", {\n        dangerouslySetInnerHTML: {\n          __html: curr_comment.comment\n        }\n      })))), _react.default.createElement("div", null, secondary_comments), _react.default.createElement("div", null, _react.default.createElement("h5", null, "Write followups ", this.state.is_fold ? _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _index.faArrowRight,\n        onClick: function onClick() {\n          return _this10.setState({\n            is_fold: false\n          });\n        }\n      }) : _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this10.setState({\n            is_fold: true\n          });\n        }\n      })), this.state.is_fold ? null : _react.default.createElement("div", null, _react.default.createElement(CommentEditor, {\n        updating_comment: function updating_comment(id, string) {\n          return _this10.props.updating_comment(id, string, curr_comment.id);\n        },\n        current_user: this.props.current_user,\n        current_question_id: this.props.current_question_id,\n        current_parent_comment_id: curr_comment.id\n      }))));\n    }\n  }]);\n\n  return FirstLevelComment;\n}(_react.Component);\n\nvar Comment =\n/*#__PURE__*/\nfunction (_Component7) {\n  _inherits(Comment, _Component7);\n\n  function Comment(props) {\n    var _this11;\n\n    _classCallCheck(this, Comment);\n\n    _this11 = _possibleConstructorReturn(this, _getPrototypeOf(Comment).call(this, props));\n    _this11.state = {\n      comments: [],\n      pageNumber: 0,\n      is_fold: true\n    };\n    return _this11;\n  }\n\n  _createClass(Comment, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      var _this12 = this;\n\n      var is_for_road_map = this.props.for_road_map === true ? 1 : 0;\n\n      _axios.default.get(get_comments_url, {\n        params: {\n          is_for_road_map: is_for_road_map,\n          question_id: this.props.question_id\n        }\n      }).then(function (response) {\n        console.log(\'Get all comments:\', response.data, Object.keys(response.data).length);\n\n        if (Object.keys(response.data).length > 0) {\n          _this12.setState({\n            comments: response.data,\n            prev_question_id: _this12.props.question_id\n          });\n        }\n      });\n    }\n  }, {\n    key: "componentDidUpdate",\n    value: function componentDidUpdate(prevProps) {\n      var _this13 = this;\n\n      if (this.props.question_id !== prevProps.question_id) {\n        var is_for_road_map = this.props.for_road_map === true ? 1 : 0;\n\n        _axios.default.get(get_comments_url, {\n          params: {\n            is_for_road_map: is_for_road_map,\n            question_id: this.props.question_id\n          }\n        }).then(function (response) {\n          _this13.setState({\n            comments: response.data,\n            pageNumber: 0,\n            is_fold: true\n          });\n        });\n      }\n\n      return null;\n    }\n  }, {\n    key: "updatingVote",\n    value: function updatingVote(id, val, is_upvote) {\n      var _this14 = this;\n\n      _axios.default.post(update_comments_url, {\n        username: this.props.user,\n        comment_id: id,\n        value: val,\n        is_upvote: is_upvote === true ? 1 : 0\n      }).then(function (response) {\n        var prev_comments = JSON.parse(JSON.stringify(_this14.state.comments));\n        var found = 0;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = prev_comments[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var first_lev_question = _step2.value;\n\n            if (first_lev_question.id === id) {\n              if (is_upvote) {\n                console.log(\'first_lev_question\', first_lev_question, val);\n                first_lev_question.upvoteNum = val;\n              } else {\n                first_lev_question.downvoteNum = val;\n              }\n\n              found = 1;\n              break;\n            }\n\n            if (found === 1) {\n              break;\n            }\n\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n              for (var _iterator3 = first_lev_question.secondaryComments[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                var second_lev_question = _step3.value;\n\n                if (second_lev_question.id === id) {\n                  if (is_upvote) {\n                    second_lev_question.upvoteNum = val;\n                  } else {\n                    second_lev_question.downvoteNum = val;\n                  }\n\n                  found = 1;\n                  break;\n                }\n              }\n            } catch (err) {\n              _didIteratorError3 = true;\n              _iteratorError3 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n                  _iterator3.return();\n                }\n              } finally {\n                if (_didIteratorError3) {\n                  throw _iteratorError3;\n                }\n              }\n            }\n\n            if (found === 1) {\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        console.log(prev_comments);\n\n        _this14.setState({\n          comments: prev_comments\n        });\n      });\n    }\n  }, {\n    key: "navigatePage",\n    value: function navigatePage(is_nextpage) {\n      var prev_pageNumber = this.state.pageNumber;\n\n      if (is_nextpage) {\n        if (Math.abs((prev_pageNumber + 1) * num_comments - this.state.comments.length) > 0) {\n          this.setState({\n            pageNumber: prev_pageNumber + 1\n          });\n        }\n      } else {\n        console.log(prev_pageNumber);\n\n        if (prev_pageNumber - 1 >= 0) {\n          this.setState({\n            pageNumber: prev_pageNumber - 1\n          });\n        }\n      }\n    }\n  }, {\n    key: "insertComment",\n    value: function insertComment(id, string, parent_id) {\n      if (parent_id !== null && parent_id !== undefined) {\n        var data = {};\n        data.imageSource = \'\';\n        data.secondaryComments = [];\n        data.user = this.props.user;\n        data.comment = string;\n        data.downvoteNum = 0;\n        data.upvoteNum = 0;\n        data.id = id;\n        var prev_comments = JSON.parse(JSON.stringify(this.state.comments));\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = prev_comments[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var first_lev_question = _step4.value;\n\n            if (first_lev_question.id === parent_id) {\n              first_lev_question.secondaryComments.unshift(data);\n              break;\n            }\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        this.setState({\n          comments: prev_comments\n        });\n      } else {\n        var _data = {};\n        _data.user = this.props.user;\n        _data.comment = string;\n        _data.id = id;\n        _data.downvoteNum = 0;\n        _data.upvoteNum = 0;\n        _data.secondaryComments = [];\n        _data.imageSource = \'\';\n\n        var _prev_comments = JSON.parse(JSON.stringify(this.state.comments));\n\n        _prev_comments.unshift(_data);\n\n        this.setState({\n          comments: _prev_comments\n        });\n      }\n    } // currently the comments only allow two-level structures\n\n  }, {\n    key: "render",\n    value: function render() {\n      var _this15 = this;\n\n      var blocks = null;\n\n      if (this.state.comments.length > 0) {\n        var user = this.props.user;\n        var current_question_id = this.props.question_id;\n        var is_for_road_map = this.props.is_for_road_map;\n        blocks = [];\n\n        for (var i = this.state.pageNumber * num_comments; i < (this.state.pageNumber + 1) * num_comments; i += 1) {\n          if (i >= this.state.comments.length) {\n            continue;\n          }\n\n          blocks.push(_react.default.createElement(FirstLevelComment, {\n            key: \'FirstLevelComment\' + this.state.comments[i].id,\n            comment_ref: this.state.comments[i],\n            updating_upvote: function updating_upvote(id, val) {\n              return _this15.updatingVote(id, val, true);\n            },\n            updating_downvote: function updating_downvote(id, val) {\n              return _this15.updatingVote(id, val, false);\n            },\n            updating_comment: function updating_comment(id, string, parent_id) {\n              return _this15.insertComment(id, string, parent_id);\n            },\n            current_user: user,\n            current_question_id: current_question_id,\n            user_profile: this.props.user_profile\n          }));\n        }\n      }\n\n      return _react.default.createElement("section", {\n        className: \'questionComments_content\'\n      }, _react.default.createElement("h3", null, "Show/Leave Comments ", this.state.is_fold ? _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _index.faArrowRight,\n        onClick: function onClick() {\n          return _this15.setState({\n            is_fold: false\n          });\n        }\n      }) : _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this15.setState({\n            is_fold: true\n          });\n        }\n      })), this.state.is_fold ? null : _react.default.createElement("div", null, _react.default.createElement("div", null, _react.default.createElement(CommentEditor, {\n        for_road_map: this.props.is_for_road_map,\n        updating_comment: function updating_comment(id, string) {\n          return _this15.insertComment(id, string, null);\n        },\n        current_user: this.props.user,\n        current_question_id: this.props.question_id\n      })), _react.default.createElement("div", null, blocks), _react.default.createElement("div", {\n        style: {\n          width: \'100%\',\n          textAlign: \'center\'\n        }\n      }, _react.default.createElement("button", {\n        style: {\n          display: \'inline-block\',\n          marginRight: \'1em\'\n        },\n        onClick: function onClick() {\n          return _this15.navigatePage(false);\n        }\n      }, "Previous Page"), _react.default.createElement("button", {\n        style: {\n          display: \'inline-block\'\n        },\n        onClick: function onClick() {\n          return _this15.navigatePage(true);\n        }\n      }, "Next Page"))));\n    }\n  }]);\n\n  return Comment;\n}(_react.Component);\n\nexports.Comment = Comment;\n\n//# sourceMappingURL=Comment.js.map\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL2NvZGluZ19wYW5lbF9tb2R1bGVzL0NvbW1lbnQuanM/MjIwZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBYTs7QUFFYjtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBLHFDQUFxQyxtQkFBTyxDQUFDLENBQU87O0FBRXBELG9DQUFvQyxtQkFBTyxDQUFDLEVBQU87O0FBRW5ELHdCQUF3QixtQkFBTyxDQUFDLEVBQWdDOztBQUVoRSx5QkFBeUIsbUJBQU8sQ0FBQyxFQUFtQzs7QUFFcEUsYUFBYSxtQkFBTyxDQUFDLEdBQXlDOztBQUU5RCx5Q0FBeUMsbUJBQU8sQ0FBQyxHQUFhOztBQUU5RCxtQkFBTyxDQUFDLEdBQWlDOztBQUV6QyxzQ0FBc0MsdUNBQXVDLGdCQUFnQjs7QUFFN0YsdUNBQXVDLDZCQUE2QixZQUFZLEVBQUUsT0FBTyxpQkFBaUIsbUJBQW1CLHVCQUF1QixzREFBc0Qsc0hBQXNILDRCQUE0QiwwQ0FBMEMsRUFBRSxPQUFPLHdCQUF3QixFQUFFLEVBQUUsRUFBRSxFQUFFLHNCQUFzQixlQUFlLEVBQUU7O0FBRXRkLHVCQUF1QiwyRUFBMkUsa0NBQWtDLG1CQUFtQixHQUFHLEVBQUUsT0FBTyxrQ0FBa0MsOEhBQThILEdBQUcsRUFBRSxxQkFBcUI7O0FBRTdWLDJDQUEyQyxnQkFBZ0Isa0JBQWtCLE9BQU8sMkJBQTJCLHdEQUF3RCxnQ0FBZ0MsdURBQXVELDJEQUEyRCxFQUFFOztBQUUzVCw2REFBNkQsc0VBQXNFLDhEQUE4RCxvQkFBb0I7O0FBRXJOLGlEQUFpRCwwRUFBMEUsYUFBYSxFQUFFLHFDQUFxQzs7QUFFL0ssdUNBQXVDLHVCQUF1Qix1RkFBdUYsRUFBRSxhQUFhOztBQUVwSyw2QkFBNkIsZ0dBQWdHLGdEQUFnRCxHQUFHLDJCQUEyQjs7QUFFM00sMENBQTBDLCtEQUErRCwyRUFBMkUsRUFBRSx5RUFBeUUsZUFBZSxzREFBc0QsRUFBRSxFQUFFLHVEQUF1RDs7QUFFL1gsZ0NBQWdDLDRFQUE0RSxpQkFBaUIsVUFBVSxHQUFHLDhCQUE4Qjs7QUFFeEssaURBQWlELDBDQUEwQywwREFBMEQsRUFBRTs7QUFFdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtEQUErRDs7QUFFL0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0ZBQXNGLGdFQUFnRTtBQUN0SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUVBQXlFLG1FQUFtRTtBQUM1STs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0dBQW9HLG1FQUFtRTtBQUN2Szs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlFQUF5RSxtRUFBbUU7QUFDNUk7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSzs7QUFFTCxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMERBQTBELGdEQUFnRDtBQUMxRztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7O0FBRUEiLCJmaWxlIjoiMTEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkNvbW1lbnQgPSBleHBvcnRzLkRvd252b3RlRGlzcGxheSA9IGV4cG9ydHMuVXB2b3RlRGlzcGxheSA9IHZvaWQgMDtcblxudmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJheGlvc1wiKSk7XG5cbnZhciBfcmVhY3RGb250YXdlc29tZSA9IHJlcXVpcmUoXCJAZm9ydGF3ZXNvbWUvcmVhY3QtZm9udGF3ZXNvbWVcIik7XG5cbnZhciBfZnJlZVNvbGlkU3ZnSWNvbnMgPSByZXF1aXJlKFwiQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zXCIpO1xuXG52YXIgX2luZGV4ID0gcmVxdWlyZShcIkBmb3J0YXdlc29tZS9mcmVlLXNvbGlkLXN2Zy1pY29ucy9pbmRleFwiKTtcblxudmFyIF9yZWFjdFF1aWxsID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3QtcXVpbGxcIikpO1xuXG5yZXF1aXJlKFwicmVhY3QtcXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIHBvc3RfY29tbWVudHNfdXJsID0gJy9wb3N0X2NvbW1lbnRzJztcbnZhciBnZXRfY29tbWVudHNfdXJsID0gJy9nZXRfY29tbWVudHMnO1xudmFyIHVwZGF0ZV9jb21tZW50c191cmwgPSAnL3VwZGF0ZV9jb21tZW50cyc7XG52YXIgbnVtX2NvbW1lbnRzID0gMTA7XG4vKlxuKiBFeHBlY3RlZCBkYXRhIGluZm86XG4qICAgY29tbWVudCBpZFxuKiAgIHVzZXJcbiogICBjb21tZW50c1xuKiAgIHVwdm90ZXNcbiogICBkb3dudm90ZXNcbiogICBzZWNvbmRhcnlcbiogKi9cbi8vIGV4cGVjdHMgaW1hZ2UgYW5kIG5hbWVcblxudmFyIEZpcnN0TGV2ZWxDb21tZW50RGF0YVN0cnVjdHVyZSA9IGZ1bmN0aW9uIEZpcnN0TGV2ZWxDb21tZW50RGF0YVN0cnVjdHVyZSgpIHtcbiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpcnN0TGV2ZWxDb21tZW50RGF0YVN0cnVjdHVyZSk7XG5cbiAgdGhpcy5pZCA9IDA7XG4gIHRoaXMuaW1hZ2VTb3VyY2UgPSAnJztcbiAgdGhpcy51c2VyID0gJyc7XG4gIHRoaXMuY29tbWVudCA9ICcnO1xuICB0aGlzLnVwdm90ZU51bSA9IDA7XG4gIHRoaXMuZG93bnZvdGVOdW0gPSAwO1xuICB0aGlzLnNlY29uZGFyeUNvbW1lbnRzID0gW107XG59O1xuXG52YXIgU2Vjb25kTGV2ZWxDb21tZW50RGF0YVN0cnVjdHVyZSA9IGZ1bmN0aW9uIFNlY29uZExldmVsQ29tbWVudERhdGFTdHJ1Y3R1cmUoKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWNvbmRMZXZlbENvbW1lbnREYXRhU3RydWN0dXJlKTtcblxuICB0aGlzLmlkID0gMDtcbiAgdGhpcy5pbWFnZVNvdXJjZSA9ICcnO1xuICB0aGlzLnVzZXIgPSAnJztcbiAgdGhpcy5jb21tZW50ID0gJyc7XG4gIHRoaXMudXB2b3RlTnVtID0gMDtcbiAgdGhpcy5kb3dudm90ZU51bSA9IDA7XG59O1xuXG52YXIgVXB2b3RlRGlzcGxheSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoVXB2b3RlRGlzcGxheSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVXB2b3RlRGlzcGxheShwcm9wcykge1xuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcHZvdGVEaXNwbGF5KTtcblxuICAgIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFVwdm90ZURpc3BsYXkpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNsaWNrZWQ6IGZhbHNlXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVXB2b3RlRGlzcGxheSwgW3tcbiAgICBrZXk6IFwicmVndWxhdGVOdW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVndWxhdGVOdW0oKSB7XG4gICAgICB2YXIgcHJldl92YWx1ZSA9IHRoaXMucHJvcHMubnVtO1xuICAgICAgY29uc29sZS5sb2cocHJldl92YWx1ZSk7XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmNsaWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGNsaWNrZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRpbmdfdXB2b3RlKHByZXZfdmFsdWUgKyAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGNsaWNrZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3BzLnVwZGF0aW5nX3Vwdm90ZShwcmV2X3ZhbHVlIC0gMSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RGb250YXdlc29tZS5Gb250QXdlc29tZUljb24sIHtcbiAgICAgICAgaWNvbjogX2ZyZWVTb2xpZFN2Z0ljb25zLmZhQXJyb3dVcCxcbiAgICAgICAgY2xhc3NOYW1lOiAnVXB2b3RlSWNvbicsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMi5yZWd1bGF0ZU51bSgpO1xuICAgICAgICB9XG4gICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIiwge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG1hcmdpbkxlZnQ6ICcwLjVlbSdcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcy5wcm9wcy5udW0pKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVXB2b3RlRGlzcGxheTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuVXB2b3RlRGlzcGxheSA9IFVwdm90ZURpc3BsYXk7XG5cbnZhciBEb3dudm90ZURpc3BsYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQyKSB7XG4gIF9pbmhlcml0cyhEb3dudm90ZURpc3BsYXksIF9Db21wb25lbnQyKTtcblxuICBmdW5jdGlvbiBEb3dudm90ZURpc3BsYXkocHJvcHMpIHtcbiAgICB2YXIgX3RoaXMzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvd252b3RlRGlzcGxheSk7XG5cbiAgICBfdGhpczMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRG93bnZvdGVEaXNwbGF5KS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgX3RoaXMzLnN0YXRlID0ge1xuICAgICAgY2xpY2tlZDogZmFsc2VcbiAgICB9O1xuICAgIHJldHVybiBfdGhpczM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRG93bnZvdGVEaXNwbGF5LCBbe1xuICAgIGtleTogXCJyZWd1bGF0ZU51bVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWd1bGF0ZU51bSgpIHtcbiAgICAgIHZhciBwcmV2X3ZhbHVlID0gdGhpcy5wcm9wcy5udW07XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmNsaWNrZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGNsaWNrZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRpbmdfZG93bnZvdGUocHJldl92YWx1ZSAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgY2xpY2tlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRpbmdfZG93bnZvdGUocHJldl92YWx1ZSArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9mcmVlU29saWRTdmdJY29ucy5mYUFycm93RG93bixcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM0LnJlZ3VsYXRlTnVtKCk7XG4gICAgICAgIH1cbiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgbWFyZ2luTGVmdDogJzAuNWVtJ1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzLnByb3BzLm51bSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEb3dudm90ZURpc3BsYXk7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLkRvd252b3RlRGlzcGxheSA9IERvd252b3RlRGlzcGxheTtcblxudmFyIFVzZXJJbmZvID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50Mykge1xuICBfaW5oZXJpdHMoVXNlckluZm8sIF9Db21wb25lbnQzKTtcblxuICBmdW5jdGlvbiBVc2VySW5mbygpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlckluZm8pO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihVc2VySW5mbykuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoVXNlckluZm8sIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnXG4gICAgICAgIH1cbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9yZGVyOiAxLFxuICAgICAgICAgIG1hcmdpblJpZ2h0OiAnMWVtJyxcbiAgICAgICAgICBtYXhXaWR0aDogJzVlbScsXG4gICAgICAgICAgbWF4SGVpZ2h0OiAnNWVtJyxcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAnbWlkZGxlJyxcbiAgICAgICAgICBib3hTaGFkb3c6ICcwIDAgMC4yZW0gZ3JleSdcbiAgICAgICAgfSxcbiAgICAgICAgc3JjOiB0aGlzLnByb3BzLnNyYyxcbiAgICAgICAgYWx0OiB0aGlzLnByb3BzLnVzZXJcbiAgICAgIH0pLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDRcIiwge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIG9yZGVyOiAyLFxuICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICdjZW50ZXInXG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMucHJvcHMudXNlcikpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBVc2VySW5mbztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBTZWNvbmRMZXZlbENvbW1lbnQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQ0KSB7XG4gIF9pbmhlcml0cyhTZWNvbmRMZXZlbENvbW1lbnQsIF9Db21wb25lbnQ0KTtcblxuICBmdW5jdGlvbiBTZWNvbmRMZXZlbENvbW1lbnQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlY29uZExldmVsQ29tbWVudCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFNlY29uZExldmVsQ29tbWVudCkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU2Vjb25kTGV2ZWxDb21tZW50LCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgIHZhciBjdXJyX2NvbW1lbnQgPSB0aGlzLnByb3BzLmNvbW1lbnRfcmVmO1xuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdTZWNvbmRMZXZlbENvbW1lbnRfY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoNFwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBudWxsLCBjdXJyX2NvbW1lbnQudXNlcikpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29tbWVudF9mbGV4J1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2NvbW1lbnRfYmxvY2tsZWZ0J1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChVcHZvdGVEaXNwbGF5LCB7XG4gICAgICAgIG51bTogY3Vycl9jb21tZW50LnVwdm90ZU51bSxcbiAgICAgICAgdXBkYXRpbmdfdXB2b3RlOiBmdW5jdGlvbiB1cGRhdGluZ191cHZvdGUodmFsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzNS5wcm9wcy51cGRhdGluZ191cHZvdGUoY3Vycl9jb21tZW50LmlkLCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChEb3dudm90ZURpc3BsYXksIHtcbiAgICAgICAgbnVtOiBjdXJyX2NvbW1lbnQuZG93bnZvdGVOdW0sXG4gICAgICAgIHVwZGF0aW5nX2Rvd252b3RlOiBmdW5jdGlvbiB1cGRhdGluZ19kb3dudm90ZSh2YWwpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM1LnByb3BzLnVwZGF0aW5nX2Rvd252b3RlKGN1cnJfY29tbWVudC5pZCwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29tbWVudF9ibG9ja3JpZ2h0J1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIiwge1xuICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgIF9faHRtbDogY3Vycl9jb21tZW50LmNvbW1lbnRcbiAgICAgICAgfVxuICAgICAgfSkpKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNlY29uZExldmVsQ29tbWVudDtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDb21tZW50RWRpdG9yID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50NSkge1xuICBfaW5oZXJpdHMoQ29tbWVudEVkaXRvciwgX0NvbXBvbmVudDUpO1xuXG4gIGZ1bmN0aW9uIENvbW1lbnRFZGl0b3IocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM2O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbW1lbnRFZGl0b3IpO1xuXG4gICAgX3RoaXM2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKENvbW1lbnRFZGl0b3IpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpczYuc3RhdGUgPSB7XG4gICAgICB0ZXh0OiAnJ1xuICAgIH07XG4gICAgcmV0dXJuIF90aGlzNjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDb21tZW50RWRpdG9yLCBbe1xuICAgIGtleTogXCJ1cGRhdGVDb21tZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUNvbW1lbnQoKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdmFyIGN1cnJlbnRfdXNlciA9IHRoaXMucHJvcHMuY3VycmVudF91c2VyO1xuICAgICAgdmFyIGN1cnJlbnRfcXVlc3Rpb25faWQgPSB0aGlzLnByb3BzLmN1cnJlbnRfcXVlc3Rpb25faWQ7IC8vIHRoaXMgdmFyaWFibGUgY2FuIGJlIG51bGwvdW5kZWZpbmVkIVxuXG4gICAgICB2YXIgY3VycmVudF9wYXJlbnRfaWQgPSB0aGlzLnByb3BzLmN1cnJlbnRfcGFyZW50X2NvbW1lbnRfaWQgPT0gbnVsbCA/IC0xIDogdGhpcy5wcm9wcy5jdXJyZW50X3BhcmVudF9jb21tZW50X2lkO1xuICAgICAgdmFyIGlzX2Zvcl9yb2FkX21hcCA9IHRoaXMucHJvcHMuZm9yX3JvYWRfbWFwID09PSB0cnVlID8gMSA6IDA7XG5cbiAgICAgIF9heGlvcy5kZWZhdWx0LnBvc3QocG9zdF9jb21tZW50c191cmwsIHtcbiAgICAgICAgdXNlcm5hbWU6IGN1cnJlbnRfdXNlcixcbiAgICAgICAgcXVlc3Rpb25faWQ6IGN1cnJlbnRfcXVlc3Rpb25faWQsXG4gICAgICAgIHBhcmVudF9jb21tZW50X2lkOiBjdXJyZW50X3BhcmVudF9pZCxcbiAgICAgICAgaXNfZm9yX3JvYWRfbWFwOiBpc19mb3Jfcm9hZF9tYXAsXG4gICAgICAgIGNvbnRlbnQ6IHRoaXMuc3RhdGUudGV4dFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NlbmQgY29tbWVudCB0byBiYWNrZW5kJywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgIHZhciBpZCA9IHJlc3BvbnNlLmRhdGFbMF07XG5cbiAgICAgICAgX3RoaXM3LnByb3BzLnVwZGF0aW5nX2NvbW1lbnQoaWQsIF90aGlzNy5zdGF0ZS50ZXh0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RRdWlsbC5kZWZhdWx0LCB7XG4gICAgICAgIHRoZW1lOiBcInNub3dcIixcbiAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUudGV4dCxcbiAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzOC5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB0ZXh0OiB2YWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczgudXBkYXRlQ29tbWVudCgpO1xuICAgICAgICB9XG4gICAgICB9LCBcIlN1Ym1pdFwiKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbW1lbnRFZGl0b3I7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG52YXIgRmlyc3RMZXZlbENvbW1lbnQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQ2KSB7XG4gIF9pbmhlcml0cyhGaXJzdExldmVsQ29tbWVudCwgX0NvbXBvbmVudDYpO1xuXG4gIGZ1bmN0aW9uIEZpcnN0TGV2ZWxDb21tZW50KHByb3BzKSB7XG4gICAgdmFyIF90aGlzOTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaXJzdExldmVsQ29tbWVudCk7XG5cbiAgICBfdGhpczkgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoRmlyc3RMZXZlbENvbW1lbnQpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpczkuc3RhdGUgPSB7XG4gICAgICBpc19mb2xkOiB0cnVlXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM5O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZpcnN0TGV2ZWxDb21tZW50LCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICB2YXIgY3Vycl9jb21tZW50ID0gdGhpcy5wcm9wcy5jb21tZW50X3JlZjtcbiAgICAgIHZhciBpbWdfc291cmNlID0gY3Vycl9jb21tZW50LmltYWdlU291cmNlO1xuXG4gICAgICBpZiAoaW1nX3NvdXJjZSA9PT0gJycgfHwgaW1nX3NvdXJjZSA9PT0gdW5kZWZpbmVkIHx8IGltZ19zb3VyY2UgPT09IG51bGwpIHtcbiAgICAgICAgaW1nX3NvdXJjZSA9IHRoaXMucHJvcHMudXNlcl9wcm9maWxlLnVzZXJQaWNTb3VyY2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBzZWNvbmRhcnlfY29tbWVudHMgPSBbXTtcbiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBjdXJyX2NvbW1lbnQuc2Vjb25kYXJ5Q29tbWVudHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIHNlY29uZF9sZXZlbF9jb21tZW50ID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgc2Vjb25kYXJ5X2NvbW1lbnRzLnB1c2goX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChTZWNvbmRMZXZlbENvbW1lbnQsIHtcbiAgICAgICAgICAgIGtleTogJ1NlY29uZExldmVsQ29tbWVudCcgKyBzZWNvbmRfbGV2ZWxfY29tbWVudC5pZCxcbiAgICAgICAgICAgIGNvbW1lbnRfcmVmOiBzZWNvbmRfbGV2ZWxfY29tbWVudCxcbiAgICAgICAgICAgIHVwZGF0aW5nX3Vwdm90ZTogZnVuY3Rpb24gdXBkYXRpbmdfdXB2b3RlKGlkLCB2YWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAucHJvcHMudXBkYXRpbmdfdXB2b3RlKGlkLCB2YWwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0aW5nX2Rvd252b3RlOiBmdW5jdGlvbiB1cGRhdGluZ19kb3dudm90ZShpZCwgdmFsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLnByb3BzLnVwZGF0aW5nX2Rvd252b3RlKGlkLCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHtcbiAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdmaXJzdExldmVsQ29tbWVudHNfY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFVzZXJJbmZvLCB7XG4gICAgICAgIHNyYzogaW1nX3NvdXJjZSxcbiAgICAgICAgdXNlcjogY3Vycl9jb21tZW50LnVzZXJcbiAgICAgIH0pKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2NvbW1lbnRfZmxleCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdjb21tZW50X2Jsb2NrbGVmdCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChVcHZvdGVEaXNwbGF5LCB7XG4gICAgICAgIG51bTogY3Vycl9jb21tZW50LnVwdm90ZU51bSxcbiAgICAgICAgdXBkYXRpbmdfdXB2b3RlOiBmdW5jdGlvbiB1cGRhdGluZ191cHZvdGUodmFsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTAucHJvcHMudXBkYXRpbmdfdXB2b3RlKGN1cnJfY29tbWVudC5pZCwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRG93bnZvdGVEaXNwbGF5LCB7XG4gICAgICAgIG51bTogY3Vycl9jb21tZW50LmRvd252b3RlTnVtLFxuICAgICAgICB1cGRhdGluZ19kb3dudm90ZTogZnVuY3Rpb24gdXBkYXRpbmdfZG93bnZvdGUodmFsKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTAucHJvcHMudXBkYXRpbmdfZG93bnZvdGUoY3Vycl9jb21tZW50LmlkLCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29tbWVudF9ibG9ja3JpZ2h0J1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIiwge1xuICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTDoge1xuICAgICAgICAgIF9faHRtbDogY3Vycl9jb21tZW50LmNvbW1lbnRcbiAgICAgICAgfVxuICAgICAgfSkpKSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgc2Vjb25kYXJ5X2NvbW1lbnRzKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDVcIiwgbnVsbCwgXCJXcml0ZSBmb2xsb3d1cHMgXCIsIHRoaXMuc3RhdGUuaXNfZm9sZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9pbmRleC5mYUFycm93UmlnaHQsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTAuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfZm9sZDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbiwge1xuICAgICAgICBpY29uOiBfZnJlZVNvbGlkU3ZnSWNvbnMuZmFBcnJvd0Rvd24sXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTAuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfZm9sZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksIHRoaXMuc3RhdGUuaXNfZm9sZCA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ29tbWVudEVkaXRvciwge1xuICAgICAgICB1cGRhdGluZ19jb21tZW50OiBmdW5jdGlvbiB1cGRhdGluZ19jb21tZW50KGlkLCBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMxMC5wcm9wcy51cGRhdGluZ19jb21tZW50KGlkLCBzdHJpbmcsIGN1cnJfY29tbWVudC5pZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRfdXNlcjogdGhpcy5wcm9wcy5jdXJyZW50X3VzZXIsXG4gICAgICAgIGN1cnJlbnRfcXVlc3Rpb25faWQ6IHRoaXMucHJvcHMuY3VycmVudF9xdWVzdGlvbl9pZCxcbiAgICAgICAgY3VycmVudF9wYXJlbnRfY29tbWVudF9pZDogY3Vycl9jb21tZW50LmlkXG4gICAgICB9KSkpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRmlyc3RMZXZlbENvbW1lbnQ7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG52YXIgQ29tbWVudCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudDcpIHtcbiAgX2luaGVyaXRzKENvbW1lbnQsIF9Db21wb25lbnQ3KTtcblxuICBmdW5jdGlvbiBDb21tZW50KHByb3BzKSB7XG4gICAgdmFyIF90aGlzMTE7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tbWVudCk7XG5cbiAgICBfdGhpczExID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKENvbW1lbnQpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpczExLnN0YXRlID0ge1xuICAgICAgY29tbWVudHM6IFtdLFxuICAgICAgcGFnZU51bWJlcjogMCxcbiAgICAgIGlzX2ZvbGQ6IHRydWVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpczExO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENvbW1lbnQsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudERpZE1vdW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgICB2YXIgaXNfZm9yX3JvYWRfbWFwID0gdGhpcy5wcm9wcy5mb3Jfcm9hZF9tYXAgPT09IHRydWUgPyAxIDogMDtcblxuICAgICAgX2F4aW9zLmRlZmF1bHQuZ2V0KGdldF9jb21tZW50c191cmwsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgaXNfZm9yX3JvYWRfbWFwOiBpc19mb3Jfcm9hZF9tYXAsXG4gICAgICAgICAgcXVlc3Rpb25faWQ6IHRoaXMucHJvcHMucXVlc3Rpb25faWRcbiAgICAgICAgfVxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0dldCBhbGwgY29tbWVudHM6JywgcmVzcG9uc2UuZGF0YSwgT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YSkubGVuZ3RoKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMocmVzcG9uc2UuZGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIF90aGlzMTIuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY29tbWVudHM6IHJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgICBwcmV2X3F1ZXN0aW9uX2lkOiBfdGhpczEyLnByb3BzLnF1ZXN0aW9uX2lkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRVcGRhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5wcm9wcy5xdWVzdGlvbl9pZCAhPT0gcHJldlByb3BzLnF1ZXN0aW9uX2lkKSB7XG4gICAgICAgIHZhciBpc19mb3Jfcm9hZF9tYXAgPSB0aGlzLnByb3BzLmZvcl9yb2FkX21hcCA9PT0gdHJ1ZSA/IDEgOiAwO1xuXG4gICAgICAgIF9heGlvcy5kZWZhdWx0LmdldChnZXRfY29tbWVudHNfdXJsLCB7XG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBpc19mb3Jfcm9hZF9tYXA6IGlzX2Zvcl9yb2FkX21hcCxcbiAgICAgICAgICAgIHF1ZXN0aW9uX2lkOiB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkXG4gICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIF90aGlzMTMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY29tbWVudHM6IHJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgICBwYWdlTnVtYmVyOiAwLFxuICAgICAgICAgICAgaXNfZm9sZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInVwZGF0aW5nVm90ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGluZ1ZvdGUoaWQsIHZhbCwgaXNfdXB2b3RlKSB7XG4gICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7XG5cbiAgICAgIF9heGlvcy5kZWZhdWx0LnBvc3QodXBkYXRlX2NvbW1lbnRzX3VybCwge1xuICAgICAgICB1c2VybmFtZTogdGhpcy5wcm9wcy51c2VyLFxuICAgICAgICBjb21tZW50X2lkOiBpZCxcbiAgICAgICAgdmFsdWU6IHZhbCxcbiAgICAgICAgaXNfdXB2b3RlOiBpc191cHZvdGUgPT09IHRydWUgPyAxIDogMFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHByZXZfY29tbWVudHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzMTQuc3RhdGUuY29tbWVudHMpKTtcbiAgICAgICAgdmFyIGZvdW5kID0gMDtcbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IHByZXZfY29tbWVudHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdF9sZXZfcXVlc3Rpb24gPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChmaXJzdF9sZXZfcXVlc3Rpb24uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgIGlmIChpc191cHZvdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmlyc3RfbGV2X3F1ZXN0aW9uJywgZmlyc3RfbGV2X3F1ZXN0aW9uLCB2YWwpO1xuICAgICAgICAgICAgICAgIGZpcnN0X2xldl9xdWVzdGlvbi51cHZvdGVOdW0gPSB2YWw7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlyc3RfbGV2X3F1ZXN0aW9uLmRvd252b3RlTnVtID0gdmFsO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZm91bmQgPSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvdW5kID09PSAxKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMyA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMyA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMyA9IGZpcnN0X2xldl9xdWVzdGlvbi5zZWNvbmRhcnlDb21tZW50c1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IChfc3RlcDMgPSBfaXRlcmF0b3IzLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRfbGV2X3F1ZXN0aW9uID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZF9sZXZfcXVlc3Rpb24uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaXNfdXB2b3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZF9sZXZfcXVlc3Rpb24udXB2b3RlTnVtID0gdmFsO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kX2xldl9xdWVzdGlvbi5kb3dudm90ZU51bSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgZm91bmQgPSAxO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvdW5kID09PSAxKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhwcmV2X2NvbW1lbnRzKTtcblxuICAgICAgICBfdGhpczE0LnNldFN0YXRlKHtcbiAgICAgICAgICBjb21tZW50czogcHJldl9jb21tZW50c1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJuYXZpZ2F0ZVBhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbmF2aWdhdGVQYWdlKGlzX25leHRwYWdlKSB7XG4gICAgICB2YXIgcHJldl9wYWdlTnVtYmVyID0gdGhpcy5zdGF0ZS5wYWdlTnVtYmVyO1xuXG4gICAgICBpZiAoaXNfbmV4dHBhZ2UpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKChwcmV2X3BhZ2VOdW1iZXIgKyAxKSAqIG51bV9jb21tZW50cyAtIHRoaXMuc3RhdGUuY29tbWVudHMubGVuZ3RoKSA+IDApIHtcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHBhZ2VOdW1iZXI6IHByZXZfcGFnZU51bWJlciArIDFcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2cocHJldl9wYWdlTnVtYmVyKTtcblxuICAgICAgICBpZiAocHJldl9wYWdlTnVtYmVyIC0gMSA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwYWdlTnVtYmVyOiBwcmV2X3BhZ2VOdW1iZXIgLSAxXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaW5zZXJ0Q29tbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbnNlcnRDb21tZW50KGlkLCBzdHJpbmcsIHBhcmVudF9pZCkge1xuICAgICAgaWYgKHBhcmVudF9pZCAhPT0gbnVsbCAmJiBwYXJlbnRfaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgZGF0YSA9IHt9O1xuICAgICAgICBkYXRhLmltYWdlU291cmNlID0gJyc7XG4gICAgICAgIGRhdGEuc2Vjb25kYXJ5Q29tbWVudHMgPSBbXTtcbiAgICAgICAgZGF0YS51c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgICBkYXRhLmNvbW1lbnQgPSBzdHJpbmc7XG4gICAgICAgIGRhdGEuZG93bnZvdGVOdW0gPSAwO1xuICAgICAgICBkYXRhLnVwdm90ZU51bSA9IDA7XG4gICAgICAgIGRhdGEuaWQgPSBpZDtcbiAgICAgICAgdmFyIHByZXZfY29tbWVudHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUuY29tbWVudHMpKTtcbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yNCA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IHByZXZfY29tbWVudHNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdF9sZXZfcXVlc3Rpb24gPSBfc3RlcDQudmFsdWU7XG5cbiAgICAgICAgICAgIGlmIChmaXJzdF9sZXZfcXVlc3Rpb24uaWQgPT09IHBhcmVudF9pZCkge1xuICAgICAgICAgICAgICBmaXJzdF9sZXZfcXVlc3Rpb24uc2Vjb25kYXJ5Q29tbWVudHMudW5zaGlmdChkYXRhKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuICAgICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjQpIHtcbiAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGNvbW1lbnRzOiBwcmV2X2NvbW1lbnRzXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIF9kYXRhID0ge307XG4gICAgICAgIF9kYXRhLnVzZXIgPSB0aGlzLnByb3BzLnVzZXI7XG4gICAgICAgIF9kYXRhLmNvbW1lbnQgPSBzdHJpbmc7XG4gICAgICAgIF9kYXRhLmlkID0gaWQ7XG4gICAgICAgIF9kYXRhLmRvd252b3RlTnVtID0gMDtcbiAgICAgICAgX2RhdGEudXB2b3RlTnVtID0gMDtcbiAgICAgICAgX2RhdGEuc2Vjb25kYXJ5Q29tbWVudHMgPSBbXTtcbiAgICAgICAgX2RhdGEuaW1hZ2VTb3VyY2UgPSAnJztcblxuICAgICAgICB2YXIgX3ByZXZfY29tbWVudHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUuY29tbWVudHMpKTtcblxuICAgICAgICBfcHJldl9jb21tZW50cy51bnNoaWZ0KF9kYXRhKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBjb21tZW50czogX3ByZXZfY29tbWVudHNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSAvLyBjdXJyZW50bHkgdGhlIGNvbW1lbnRzIG9ubHkgYWxsb3cgdHdvLWxldmVsIHN0cnVjdHVyZXNcblxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgIHZhciBibG9ja3MgPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5jb21tZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB1c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgICB2YXIgY3VycmVudF9xdWVzdGlvbl9pZCA9IHRoaXMucHJvcHMucXVlc3Rpb25faWQ7XG4gICAgICAgIHZhciBpc19mb3Jfcm9hZF9tYXAgPSB0aGlzLnByb3BzLmlzX2Zvcl9yb2FkX21hcDtcbiAgICAgICAgYmxvY2tzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuc3RhdGUucGFnZU51bWJlciAqIG51bV9jb21tZW50czsgaSA8ICh0aGlzLnN0YXRlLnBhZ2VOdW1iZXIgKyAxKSAqIG51bV9jb21tZW50czsgaSArPSAxKSB7XG4gICAgICAgICAgaWYgKGkgPj0gdGhpcy5zdGF0ZS5jb21tZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJsb2Nrcy5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoRmlyc3RMZXZlbENvbW1lbnQsIHtcbiAgICAgICAgICAgIGtleTogJ0ZpcnN0TGV2ZWxDb21tZW50JyArIHRoaXMuc3RhdGUuY29tbWVudHNbaV0uaWQsXG4gICAgICAgICAgICBjb21tZW50X3JlZjogdGhpcy5zdGF0ZS5jb21tZW50c1tpXSxcbiAgICAgICAgICAgIHVwZGF0aW5nX3Vwdm90ZTogZnVuY3Rpb24gdXBkYXRpbmdfdXB2b3RlKGlkLCB2YWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTUudXBkYXRpbmdWb3RlKGlkLCB2YWwsIHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0aW5nX2Rvd252b3RlOiBmdW5jdGlvbiB1cGRhdGluZ19kb3dudm90ZShpZCwgdmFsKSB7XG4gICAgICAgICAgICAgIHJldHVybiBfdGhpczE1LnVwZGF0aW5nVm90ZShpZCwgdmFsLCBmYWxzZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRpbmdfY29tbWVudDogZnVuY3Rpb24gdXBkYXRpbmdfY29tbWVudChpZCwgc3RyaW5nLCBwYXJlbnRfaWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTUuaW5zZXJ0Q29tbWVudChpZCwgc3RyaW5nLCBwYXJlbnRfaWQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1cnJlbnRfdXNlcjogdXNlcixcbiAgICAgICAgICAgIGN1cnJlbnRfcXVlc3Rpb25faWQ6IGN1cnJlbnRfcXVlc3Rpb25faWQsXG4gICAgICAgICAgICB1c2VyX3Byb2ZpbGU6IHRoaXMucHJvcHMudXNlcl9wcm9maWxlXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3F1ZXN0aW9uQ29tbWVudHNfY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBudWxsLCBcIlNob3cvTGVhdmUgQ29tbWVudHMgXCIsIHRoaXMuc3RhdGUuaXNfZm9sZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9pbmRleC5mYUFycm93UmlnaHQsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfZm9sZDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSkgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9yZWFjdEZvbnRhd2Vzb21lLkZvbnRBd2Vzb21lSWNvbiwge1xuICAgICAgICBpY29uOiBfZnJlZVNvbGlkU3ZnSWNvbnMuZmFBcnJvd0Rvd24sXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzMTUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfZm9sZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksIHRoaXMuc3RhdGUuaXNfZm9sZCA/IG51bGwgOiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChDb21tZW50RWRpdG9yLCB7XG4gICAgICAgIGZvcl9yb2FkX21hcDogdGhpcy5wcm9wcy5pc19mb3Jfcm9hZF9tYXAsXG4gICAgICAgIHVwZGF0aW5nX2NvbW1lbnQ6IGZ1bmN0aW9uIHVwZGF0aW5nX2NvbW1lbnQoaWQsIHN0cmluZykge1xuICAgICAgICAgIHJldHVybiBfdGhpczE1Lmluc2VydENvbW1lbnQoaWQsIHN0cmluZywgbnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGN1cnJlbnRfdXNlcjogdGhpcy5wcm9wcy51c2VyLFxuICAgICAgICBjdXJyZW50X3F1ZXN0aW9uX2lkOiB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkXG4gICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgYmxvY2tzKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICAgIH1cbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgIG1hcmdpblJpZ2h0OiAnMWVtJ1xuICAgICAgICB9LFxuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczE1Lm5hdmlnYXRlUGFnZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIFwiUHJldmlvdXMgUGFnZVwiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaydcbiAgICAgICAgfSxcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMxNS5uYXZpZ2F0ZVBhZ2UodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sIFwiTmV4dCBQYWdlXCIpKSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDb21tZW50O1xufShfcmVhY3QuQ29tcG9uZW50KTtcblxuZXhwb3J0cy5Db21tZW50ID0gQ29tbWVudDtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29tbWVudC5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///112\n')},131:function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\nexports.Rating = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__(1));\n\nvar _axios = _interopRequireDefault(__webpack_require__(11));\n\nvar _reactStarRatingComponent = _interopRequireDefault(__webpack_require__(401));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar rating_submission_url = \'/post_rating\';\nvar rating_receiving_url = \'/get_rating\';\n\nvar SubmitRating =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SubmitRating, _Component);\n\n  function SubmitRating() {\n    _classCallCheck(this, SubmitRating);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SubmitRating).apply(this, arguments));\n  }\n\n  _createClass(SubmitRating, [{\n    key: "render",\n    value: function render() {\n      var _this = this;\n\n      return _react.default.createElement("div", {\n        className: \'submitRating_content\'\n      }, _react.default.createElement("h3", null, "Submit your rating here!"), _react.default.createElement(_reactStarRatingComponent.default, {\n        name: "Rating",\n        starCount: 5,\n        value: this.props.rating,\n        onStarClick: function onStarClick(nextValue, prevValue, name) {\n          return _this.props.ratingOnClickHander(nextValue, prevValue, name);\n        }\n      }));\n    }\n  }]);\n\n  return SubmitRating;\n}(_react.Component);\n\nvar DisplayRating =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(DisplayRating, _Component2);\n\n  function DisplayRating(props) {\n    var _this2;\n\n    _classCallCheck(this, DisplayRating);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(DisplayRating).call(this, props));\n    _this2.state = {\n      ratings: 0\n    };\n    return _this2;\n  }\n\n  _createClass(DisplayRating, [{\n    key: "componentDidMount",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      var is_for_road_map = this.props.for_road_map === true ? 1 : 0;\n\n      _axios.default.get(rating_receiving_url, {\n        params: {\n          question_id: this.props.question_id,\n          is_for_road_map: is_for_road_map\n        }\n      }).then(function (response) {\n        _this3.setState({\n          ratings: response.data\n        });\n      });\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      return _react.default.createElement("div", {\n        className: \'displayRating_content\'\n      }, _react.default.createElement("h4", null, "Users\' ratings"), _react.default.createElement(_reactStarRatingComponent.default, {\n        name: "Rating",\n        starCount: 5,\n        value: this.state.ratings\n      }));\n    }\n  }]);\n\n  return DisplayRating;\n}(_react.Component);\n\nvar Rating =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(Rating, _Component3);\n\n  function Rating(props) {\n    var _this4;\n\n    _classCallCheck(this, Rating);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(Rating).call(this, props));\n    _this4.state = {\n      rating: 0,\n      is_display_rating: false\n    };\n    return _this4;\n  }\n\n  _createClass(Rating, [{\n    key: "componentWillReceiveProps",\n    value: function componentWillReceiveProps(newprops) {\n      this.setState({\n        rating: 0,\n        is_display_rating: false\n      });\n    }\n  }, {\n    key: "ratingOnClickHander",\n    value: function ratingOnClickHander(nextValue, prevValue, name) {\n      var _this5 = this;\n\n      this.setState({\n        rating: nextValue\n      });\n      var user = this.props.user;\n      var current_question_id = this.props.question_id;\n      var is_for_road_map = this.props.for_road_map === true ? 1 : 0;\n      console.log(\'is_for_road_map\', is_for_road_map);\n\n      _axios.default.post(rating_submission_url, {\n        question_id: current_question_id,\n        is_for_road_map: is_for_road_map,\n        value: nextValue\n      }).then(function (response) {\n        _this5.setState({\n          is_display_rating: true\n        });\n      });\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this6 = this;\n\n      console.log(\'change question id,\', this.props.question_id, this.state);\n      return _react.default.createElement("div", {\n        className: \'rating_content\'\n      }, this.state.is_display_rating ? _react.default.createElement(DisplayRating, {\n        for_road_map: this.props.for_road_map,\n        question_id: this.props.question_id\n      }) : _react.default.createElement(SubmitRating, {\n        rating: this.state.rating,\n        ratingOnClickHander: function ratingOnClickHander(nextValue, prevValue, name) {\n          return _this6.ratingOnClickHander(nextValue, prevValue, name);\n        }\n      }));\n    }\n  }]);\n\n  return Rating;\n}(_react.Component);\n\nexports.Rating = Rating;\n\n//# sourceMappingURL=Rating.js.map\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL2NvZGluZ19wYW5lbF9tb2R1bGVzL1JhdGluZy5qcz8wOGUwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUEscUNBQXFDLG1CQUFPLENBQUMsQ0FBTzs7QUFFcEQsb0NBQW9DLG1CQUFPLENBQUMsRUFBTzs7QUFFbkQsdURBQXVELG1CQUFPLENBQUMsR0FBNkI7O0FBRTVGLHNDQUFzQyx1Q0FBdUMsZ0JBQWdCOztBQUU3Rix1Q0FBdUMsNkJBQTZCLFlBQVksRUFBRSxPQUFPLGlCQUFpQixtQkFBbUIsdUJBQXVCLHNEQUFzRCxzSEFBc0gsNEJBQTRCLDBDQUEwQyxFQUFFLE9BQU8sd0JBQXdCLEVBQUUsRUFBRSxFQUFFLEVBQUUsc0JBQXNCLGVBQWUsRUFBRTs7QUFFdGQsdUJBQXVCLDJFQUEyRSxrQ0FBa0MsbUJBQW1CLEdBQUcsRUFBRSxPQUFPLGtDQUFrQyw4SEFBOEgsR0FBRyxFQUFFLHFCQUFxQjs7QUFFN1YsaURBQWlELDBDQUEwQywwREFBMEQsRUFBRTs7QUFFdkosMkNBQTJDLGdCQUFnQixrQkFBa0IsT0FBTywyQkFBMkIsd0RBQXdELGdDQUFnQyx1REFBdUQsMkRBQTJELEVBQUU7O0FBRTNULDZEQUE2RCxzRUFBc0UsOERBQThELG9CQUFvQjs7QUFFck4saURBQWlELDBFQUEwRSxhQUFhLEVBQUUscUNBQXFDOztBQUUvSyx1Q0FBdUMsdUJBQXVCLHVGQUF1RixFQUFFLGFBQWE7O0FBRXBLLDZCQUE2QixnR0FBZ0csZ0RBQWdELEdBQUcsMkJBQTJCOztBQUUzTSwwQ0FBMEMsK0RBQStELDJFQUEyRSxFQUFFLHlFQUF5RSxlQUFlLHNEQUFzRCxFQUFFLEVBQUUsdURBQXVEOztBQUUvWCxnQ0FBZ0MsNEVBQTRFLGlCQUFpQixVQUFVLEdBQUcsOEJBQThCOztBQUV4SztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7O0FBRUEiLCJmaWxlIjoiMTMxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlJhdGluZyA9IHZvaWQgMDtcblxudmFyIF9yZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG5cbnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJheGlvc1wiKSk7XG5cbnZhciBfcmVhY3RTdGFyUmF0aW5nQ29tcG9uZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwicmVhY3Qtc3Rhci1yYXRpbmctY29tcG9uZW50XCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBlbHNlIHsgdmFyIG5ld09iaiA9IHt9OyBpZiAob2JqICE9IG51bGwpIHsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiB7fTsgaWYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxudmFyIHJhdGluZ19zdWJtaXNzaW9uX3VybCA9ICcvcG9zdF9yYXRpbmcnO1xudmFyIHJhdGluZ19yZWNlaXZpbmdfdXJsID0gJy9nZXRfcmF0aW5nJztcblxudmFyIFN1Ym1pdFJhdGluZyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICBfaW5oZXJpdHMoU3VibWl0UmF0aW5nLCBfQ29tcG9uZW50KTtcblxuICBmdW5jdGlvbiBTdWJtaXRSYXRpbmcoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1Ym1pdFJhdGluZyk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFN1Ym1pdFJhdGluZykuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU3VibWl0UmF0aW5nLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdzdWJtaXRSYXRpbmdfY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBudWxsLCBcIlN1Ym1pdCB5b3VyIHJhdGluZyBoZXJlIVwiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RTdGFyUmF0aW5nQ29tcG9uZW50LmRlZmF1bHQsIHtcbiAgICAgICAgbmFtZTogXCJSYXRpbmdcIixcbiAgICAgICAgc3RhckNvdW50OiA1LFxuICAgICAgICB2YWx1ZTogdGhpcy5wcm9wcy5yYXRpbmcsXG4gICAgICAgIG9uU3RhckNsaWNrOiBmdW5jdGlvbiBvblN0YXJDbGljayhuZXh0VmFsdWUsIHByZXZWYWx1ZSwgbmFtZSkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9wcy5yYXRpbmdPbkNsaWNrSGFuZGVyKG5leHRWYWx1ZSwgcHJldlZhbHVlLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTdWJtaXRSYXRpbmc7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG52YXIgRGlzcGxheVJhdGluZyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudDIpIHtcbiAgX2luaGVyaXRzKERpc3BsYXlSYXRpbmcsIF9Db21wb25lbnQyKTtcblxuICBmdW5jdGlvbiBEaXNwbGF5UmF0aW5nKHByb3BzKSB7XG4gICAgdmFyIF90aGlzMjtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaXNwbGF5UmF0aW5nKTtcblxuICAgIF90aGlzMiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihEaXNwbGF5UmF0aW5nKS5jYWxsKHRoaXMsIHByb3BzKSk7XG4gICAgX3RoaXMyLnN0YXRlID0ge1xuICAgICAgcmF0aW5nczogMFxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzMjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEaXNwbGF5UmF0aW5nLCBbe1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICB2YXIgaXNfZm9yX3JvYWRfbWFwID0gdGhpcy5wcm9wcy5mb3Jfcm9hZF9tYXAgPT09IHRydWUgPyAxIDogMDtcblxuICAgICAgX2F4aW9zLmRlZmF1bHQuZ2V0KHJhdGluZ19yZWNlaXZpbmdfdXJsLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHF1ZXN0aW9uX2lkOiB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkLFxuICAgICAgICAgIGlzX2Zvcl9yb2FkX21hcDogaXNfZm9yX3JvYWRfbWFwXG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIF90aGlzMy5zZXRTdGF0ZSh7XG4gICAgICAgICAgcmF0aW5nczogcmVzcG9uc2UuZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdkaXNwbGF5UmF0aW5nX2NvbnRlbnQnXG4gICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDRcIiwgbnVsbCwgXCJVc2VycycgcmF0aW5nc1wiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RTdGFyUmF0aW5nQ29tcG9uZW50LmRlZmF1bHQsIHtcbiAgICAgICAgbmFtZTogXCJSYXRpbmdcIixcbiAgICAgICAgc3RhckNvdW50OiA1LFxuICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5yYXRpbmdzXG4gICAgICB9KSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERpc3BsYXlSYXRpbmc7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG52YXIgUmF0aW5nID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50Mykge1xuICBfaW5oZXJpdHMoUmF0aW5nLCBfQ29tcG9uZW50Myk7XG5cbiAgZnVuY3Rpb24gUmF0aW5nKHByb3BzKSB7XG4gICAgdmFyIF90aGlzNDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSYXRpbmcpO1xuXG4gICAgX3RoaXM0ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKFJhdGluZykuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIF90aGlzNC5zdGF0ZSA9IHtcbiAgICAgIHJhdGluZzogMCxcbiAgICAgIGlzX2Rpc3BsYXlfcmF0aW5nOiBmYWxzZVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzNDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSYXRpbmcsIFt7XG4gICAga2V5OiBcImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXdwcm9wcykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHJhdGluZzogMCxcbiAgICAgICAgaXNfZGlzcGxheV9yYXRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmF0aW5nT25DbGlja0hhbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByYXRpbmdPbkNsaWNrSGFuZGVyKG5leHRWYWx1ZSwgcHJldlZhbHVlLCBuYW1lKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHJhdGluZzogbmV4dFZhbHVlXG4gICAgICB9KTtcbiAgICAgIHZhciB1c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgdmFyIGN1cnJlbnRfcXVlc3Rpb25faWQgPSB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkO1xuICAgICAgdmFyIGlzX2Zvcl9yb2FkX21hcCA9IHRoaXMucHJvcHMuZm9yX3JvYWRfbWFwID09PSB0cnVlID8gMSA6IDA7XG4gICAgICBjb25zb2xlLmxvZygnaXNfZm9yX3JvYWRfbWFwJywgaXNfZm9yX3JvYWRfbWFwKTtcblxuICAgICAgX2F4aW9zLmRlZmF1bHQucG9zdChyYXRpbmdfc3VibWlzc2lvbl91cmwsIHtcbiAgICAgICAgcXVlc3Rpb25faWQ6IGN1cnJlbnRfcXVlc3Rpb25faWQsXG4gICAgICAgIGlzX2Zvcl9yb2FkX21hcDogaXNfZm9yX3JvYWRfbWFwLFxuICAgICAgICB2YWx1ZTogbmV4dFZhbHVlXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBfdGhpczUuc2V0U3RhdGUoe1xuICAgICAgICAgIGlzX2Rpc3BsYXlfcmF0aW5nOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgY29uc29sZS5sb2coJ2NoYW5nZSBxdWVzdGlvbiBpZCwnLCB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkLCB0aGlzLnN0YXRlKTtcbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAncmF0aW5nX2NvbnRlbnQnXG4gICAgICB9LCB0aGlzLnN0YXRlLmlzX2Rpc3BsYXlfcmF0aW5nID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChEaXNwbGF5UmF0aW5nLCB7XG4gICAgICAgIGZvcl9yb2FkX21hcDogdGhpcy5wcm9wcy5mb3Jfcm9hZF9tYXAsXG4gICAgICAgIHF1ZXN0aW9uX2lkOiB0aGlzLnByb3BzLnF1ZXN0aW9uX2lkXG4gICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoU3VibWl0UmF0aW5nLCB7XG4gICAgICAgIHJhdGluZzogdGhpcy5zdGF0ZS5yYXRpbmcsXG4gICAgICAgIHJhdGluZ09uQ2xpY2tIYW5kZXI6IGZ1bmN0aW9uIHJhdGluZ09uQ2xpY2tIYW5kZXIobmV4dFZhbHVlLCBwcmV2VmFsdWUsIG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM2LnJhdGluZ09uQ2xpY2tIYW5kZXIobmV4dFZhbHVlLCBwcmV2VmFsdWUsIG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJhdGluZztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbmV4cG9ydHMuUmF0aW5nID0gUmF0aW5nO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1SYXRpbmcuanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///131\n')}}]);