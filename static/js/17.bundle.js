(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[17],{

/***/ "./modules/ProfilePanel.js":
/*!*********************************!*\
  !*** ./modules/ProfilePanel.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"./node_modules/react/index.js\"));\n\nvar _axios = _interopRequireDefault(__webpack_require__(/*! axios */ \"./node_modules/axios/index.js\"));\n\nvar _reactFontawesome = __webpack_require__(/*! @fortawesome/react-fontawesome */ \"./node_modules/@fortawesome/react-fontawesome/index.es.js\");\n\nvar _freeSolidSvgIcons = __webpack_require__(/*! @fortawesome/free-solid-svg-icons */ \"./node_modules/@fortawesome/free-solid-svg-icons/index.es.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar user_profile_fetching_url = '/get_user_profile';\nvar user_profile_updating_url = '/change_user_settings'; // const user_profile_deleting_url = '';\n\nvar UserProfile = function UserProfile() {\n  _classCallCheck(this, UserProfile);\n\n  this.id = 0;\n  this.username = '';\n  this.userEmail = '';\n  this.userNewPassword = '';\n  this.userPicSource = '';\n  this.correctQuestionCount = 0;\n  this.commentCount = 0;\n  this.uploadQuestionCount = 0;\n  this.uploadTestCaseCount = 0;\n  this.eBucks = 0;\n  this.items = []; // assume items are just texts\n\n  this.friends = []; // list of string\n\n  this.level = 0;\n};\n\nvar FriendsInfoItem =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FriendsInfoItem, _Component);\n\n  function FriendsInfoItem(props) {\n    var _this;\n\n    _classCallCheck(this, FriendsInfoItem);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FriendsInfoItem).call(this, props));\n    _this.state = {\n      clicked: false,\n      profile: null\n    };\n    return _this;\n  }\n\n  _createClass(FriendsInfoItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var username = this.props.username;\n\n      _axios.default.get(user_profile_fetching_url, {\n        params: {\n          username: username\n        }\n      }).then(function (response) {\n        _this2.setState({\n          profile: response.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var profile = this.state.profile;\n\n      if (this.state.clicked) {\n        return _react.default.createElement(\"div\", null, _react.default.createElement(\"div\", {\n          onClick: function onClick() {\n            return _this3.setState({\n              clicked: false\n            });\n          }\n        }, _react.default.createElement(\"span\", null, profile.username), _react.default.createElement(\"span\", null, profile.level)), _react.default.createElement(\"div\", null, _react.default.createElement(\"dl\", null, _react.default.createElement(\"dt\", null, \"Correct Questions\"), _react.default.createElement(\"dd\", null, profile.correctQuestionCount), _react.default.createElement(\"dt\", null, \"Uploaded Questions\"), _react.default.createElement(\"dd\", null, profile.uploadQuestionCount), _react.default.createElement(\"dt\", null, \"Uploaded Testcases\"), _react.default.createElement(\"dd\", null, profile.uploadTestCaseCount), _react.default.createElement(\"dt\", null, \"Unlocked Items\"), _react.default.createElement(\"dd\", null, profile.items.length))));\n      } else {\n        return _react.default.createElement(\"div\", null, _react.default.createElement(\"div\", {\n          onClick: function onClick() {\n            return _this3.setState({\n              clicked: true\n            });\n          }\n        }, _react.default.createElement(\"span\", null, profile.username), _react.default.createElement(\"span\", null, profile.level)));\n      }\n    }\n  }]);\n\n  return FriendsInfoItem;\n}(_react.Component);\n\nvar FriendsInfo =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(FriendsInfo, _Component2);\n\n  function FriendsInfo(props) {\n    var _this4;\n\n    _classCallCheck(this, FriendsInfo);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(FriendsInfo).call(this, props));\n    _this4.state = {\n      is_fold: true\n    };\n    return _this4;\n  }\n\n  _createClass(FriendsInfo, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var arr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.props.profile.friends[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var friend = _step.value;\n          arr.push(_react.default.createElement(\"li\", null, _react.default.createElement(FriendsInfoItem, {\n            username: friend\n          })));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: 'FriendsInfo_content'\n      }, _react.default.createElement(\"h3\", null, \"Friends  \", this.state.is_fold ? _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowRight,\n        onClick: function onClick() {\n          return _this5.setState({\n            is_fold: false\n          });\n        }\n      }) : _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this5.setState({\n            is_fold: true\n          });\n        }\n      })), _react.default.createElement(\"ul\", null, arr));\n    }\n  }]);\n\n  return FriendsInfo;\n}(_react.Component);\n\nvar ItemsInfo =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(ItemsInfo, _Component3);\n\n  function ItemsInfo(props) {\n    var _this6;\n\n    _classCallCheck(this, ItemsInfo);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(ItemsInfo).call(this, props));\n    _this6.state = {\n      is_fold: true\n    };\n    return _this6;\n  }\n\n  _createClass(ItemsInfo, [{\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      var profile = this.props.profile;\n      var arr = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = profile.items[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          arr.push(_react.default.createElement(\"li\", null, item));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: 'ContentsInfo_content'\n      }, _react.default.createElement(\"h3\", null, \"Achievements \", this.state.is_fold ? _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowRight,\n        onClick: function onClick() {\n          return _this7.setState({\n            is_fold: false\n          });\n        }\n      }) : _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this7.setState({\n            is_fold: true\n          });\n        }\n      })), _react.default.createElement(\"div\", {\n        className: 'ContentsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have eBucks left:\"), _react.default.createElement(\"p\", null, \"$\", profile.eBucks)), profile.items.length > 0 ? _react.default.createElement(\"div\", {\n        className: 'ContentsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have unlocked those items:\"), _react.default.createElement(\"ul\", null, arr)) : null, _react.default.createElement(\"div\", {\n        className: 'ContentsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"Your are currently at level:\"), _react.default.createElement(\"p\", null, profile.level)));\n    }\n  }]);\n\n  return ItemsInfo;\n}(_react.Component);\n\nvar CountsInfo =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(CountsInfo, _Component4);\n\n  function CountsInfo(props) {\n    var _this8;\n\n    _classCallCheck(this, CountsInfo);\n\n    _this8 = _possibleConstructorReturn(this, _getPrototypeOf(CountsInfo).call(this, props));\n    _this8.state = {\n      is_fold: true\n    };\n    return _this8;\n  }\n\n  _createClass(CountsInfo, [{\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      var profile = this.props.profile;\n      return _react.default.createElement(\"div\", {\n        className: 'CountsInfo_content'\n      }, _react.default.createElement(\"h3\", null, \"Statistics \", this.state.is_fold ? _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowRight,\n        onClick: function onClick() {\n          return _this9.setState({\n            is_fold: false\n          });\n        }\n      }) : _react.default.createElement(_reactFontawesome.FontAwesomeIcon, {\n        icon: _freeSolidSvgIcons.faArrowDown,\n        onClick: function onClick() {\n          return _this9.setState({\n            is_fold: true\n          });\n        }\n      })), _react.default.createElement(\"div\", {\n        className: 'CountsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have correctly answered questions:\"), _react.default.createElement(\"p\", null, profile.correctQuestionCount)), _react.default.createElement(\"div\", {\n        className: 'CountsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have made comments:\"), _react.default.createElement(\"p\", null, profile.commentCount)), _react.default.createElement(\"div\", {\n        className: 'CountsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have uploaded questions:\"), _react.default.createElement(\"p\", null, profile.uploadQuestionCount)), _react.default.createElement(\"div\", {\n        className: 'CountsInfo_block'\n      }, _react.default.createElement(\"h4\", null, \"You have submitted testcases:\"), _react.default.createElement(\"p\", null, profile.uploadTestCaseCount)));\n    }\n  }]);\n\n  return CountsInfo;\n}(_react.Component);\n\nvar UserBasicInfo =\n/*#__PURE__*/\nfunction (_Component5) {\n  _inherits(UserBasicInfo, _Component5);\n\n  function UserBasicInfo(props) {\n    var _this10;\n\n    _classCallCheck(this, UserBasicInfo);\n\n    _this10 = _possibleConstructorReturn(this, _getPrototypeOf(UserBasicInfo).call(this, props));\n    _this10.state = {\n      displaySettings: false,\n      newPassword: '',\n      newEmail: ''\n    };\n    return _this10;\n  }\n\n  _createClass(UserBasicInfo, [{\n    key: \"handleSettingSubmit\",\n    value: function handleSettingSubmit() {\n      var _this11 = this;\n\n      _axios.default.post(user_profile_updating_url, {\n        password: this.state.newPassword,\n        email: this.state.newEmail,\n        user_id: this.props.profile.id\n      }).then(function (response) {\n        _this11.setState({\n          displaySettings: false\n        });\n\n        if (_this11.state.newEmail !== '') {\n          _this11.props.updating_email(_this11.state.newEmail);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this12 = this;\n\n      // TODO: user theme settings\n      var arr = [];\n      var profile = this.props.profile;\n      arr.push(_react.default.createElement(\"img\", {\n        src: profile.userPicSource\n      }));\n\n      if (this.state.displaySettings === false) {\n        arr.push(_react.default.createElement(\"h3\", null, profile.username));\n        arr.push(_react.default.createElement(\"h4\", null, profile.userEmail));\n        arr.push(_react.default.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this12.setState({\n              displaySettings: true\n            });\n          }\n        }, \"Change Email or Password\"));\n      } else {\n        arr.push(_react.default.createElement(\"div\", null, \"Leave blank any input you don't want to change\"));\n        arr.push(_react.default.createElement(\"div\", null, _react.default.createElement(\"label\", {\n          htmlFor: 'settings_password'\n        }, \"Change Password\"), _react.default.createElement(\"input\", {\n          id: 'settings_password',\n          key: 'settings_password',\n          type: 'password',\n          value: this.state.newPassword,\n          onChange: function onChange(e) {\n            return _this12.setState({\n              newPassword: e.target.value\n            });\n          }\n        })));\n        arr.push(_react.default.createElement(\"div\", null, _react.default.createElement(\"label\", {\n          htmlFor: 'settings_email'\n        }, \"Change Password\"), _react.default.createElement(\"input\", {\n          id: 'settings_email',\n          key: 'settings_email',\n          type: 'text',\n          value: this.state.newEmail,\n          onChange: function onChange(e) {\n            return _this12.setState({\n              newEmail: e.target.value\n            });\n          }\n        })));\n        arr.push(_react.default.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this12.handleSettingSubmit();\n          }\n        }, \"Submit\"));\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: 'UserBasicInfo_content'\n      }, _react.default.createElement(\"h2\", null, \"Profile\"), _react.default.createElement(\"div\", null, arr));\n    }\n  }]);\n\n  return UserBasicInfo;\n}(_react.Component);\n\nvar ProfilePanel =\n/*#__PURE__*/\nfunction (_Component6) {\n  _inherits(ProfilePanel, _Component6);\n\n  function ProfilePanel(props) {\n    var _this13;\n\n    _classCallCheck(this, ProfilePanel);\n\n    _this13 = _possibleConstructorReturn(this, _getPrototypeOf(ProfilePanel).call(this, props));\n    _this13.state = {\n      user_profile: new UserProfile()\n    };\n    return _this13;\n  }\n\n  _createClass(ProfilePanel, [{\n    key: \"updatingEmail\",\n    value: function updatingEmail(newEmail) {\n      var prev_profile = JSON.parse(JSON.stringify(this.state.user_profile));\n      prev_profile.userEmail = newEmail;\n      this.setState({\n        user_profile: prev_profile\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this14 = this;\n\n      var user = this.props.user;\n\n      _axios.default.get(user_profile_fetching_url, {\n        params: {\n          username: user\n        }\n      }).then(function (response) {\n        console.log('user profile is ', response.data);\n\n        _this14.setState({\n          user_profile: response.data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this15 = this;\n\n      var user = this.props.user;\n      return _react.default.createElement(\"div\", {\n        className: 'ProfilePanel_content'\n      }, _react.default.createElement(UserBasicInfo, {\n        profile: this.state.user_profile,\n        updating_email: function updating_email(val) {\n          return _this15.updatingEmail(val);\n        }\n      }), _react.default.createElement(CountsInfo, {\n        profile: this.state.user_profile\n      }), _react.default.createElement(ItemsInfo, {\n        profile: this.state.user_profile\n      }), _react.default.createElement(FriendsInfo, {\n        profile: this.state.user_profile\n      }));\n    }\n  }]);\n\n  return ProfilePanel;\n}(_react.Component);\n\nexports.default = ProfilePanel;\n\n//# sourceMappingURL=ProfilePanel.js.map\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9tb2R1bGVzL1Byb2ZpbGVQYW5lbC5qcz9lNjYxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7O0FBRUEscUNBQXFDLG1CQUFPLENBQUMsNENBQU87O0FBRXBELG9DQUFvQyxtQkFBTyxDQUFDLDRDQUFPOztBQUVuRCx3QkFBd0IsbUJBQU8sQ0FBQyxpR0FBZ0M7O0FBRWhFLHlCQUF5QixtQkFBTyxDQUFDLHVHQUFtQzs7QUFFcEUsc0NBQXNDLHVDQUF1QyxnQkFBZ0I7O0FBRTdGLHVDQUF1Qyw2QkFBNkIsWUFBWSxFQUFFLE9BQU8saUJBQWlCLG1CQUFtQix1QkFBdUIsc0RBQXNELHNIQUFzSCw0QkFBNEIsMENBQTBDLEVBQUUsT0FBTyx3QkFBd0IsRUFBRSxFQUFFLEVBQUUsRUFBRSxzQkFBc0IsZUFBZSxFQUFFOztBQUV0ZCx1QkFBdUIsMkVBQTJFLGtDQUFrQyxtQkFBbUIsR0FBRyxFQUFFLE9BQU8sa0NBQWtDLDhIQUE4SCxHQUFHLEVBQUUscUJBQXFCOztBQUU3ViwyQ0FBMkMsZ0JBQWdCLGtCQUFrQixPQUFPLDJCQUEyQix3REFBd0QsZ0NBQWdDLHVEQUF1RCwyREFBMkQsRUFBRTs7QUFFM1QsNkRBQTZELHNFQUFzRSw4REFBOEQsb0JBQW9COztBQUVyTixpREFBaUQsMEVBQTBFLGFBQWEsRUFBRSxxQ0FBcUM7O0FBRS9LLHVDQUF1Qyx1QkFBdUIsdUZBQXVGLEVBQUUsYUFBYTs7QUFFcEssNkJBQTZCLGdHQUFnRyxnREFBZ0QsR0FBRywyQkFBMkI7O0FBRTNNLDBDQUEwQywrREFBK0QsMkVBQTJFLEVBQUUseUVBQXlFLGVBQWUsc0RBQXNELEVBQUUsRUFBRSx1REFBdUQ7O0FBRS9YLGdDQUFnQyw0RUFBNEUsaUJBQWlCLFVBQVUsR0FBRyw4QkFBOEI7O0FBRXhLLGlEQUFpRCwwQ0FBMEMsMERBQTBELEVBQUU7O0FBRXZKO0FBQ0Esd0RBQXdEOztBQUV4RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCOztBQUVsQixvQkFBb0I7O0FBRXBCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0ZBQWtGLGdFQUFnRTtBQUNsSjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUVBQXVFLG1FQUFtRTtBQUMxSTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7O0FBRUEiLCJmaWxlIjoiLi9tb2R1bGVzL1Byb2ZpbGVQYW5lbC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX3JlYWN0ID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0XCIpKTtcblxudmFyIF9heGlvcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImF4aW9zXCIpKTtcblxudmFyIF9yZWFjdEZvbnRhd2Vzb21lID0gcmVxdWlyZShcIkBmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZVwiKTtcblxudmFyIF9mcmVlU29saWRTdmdJY29ucyA9IHJlcXVpcmUoXCJAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnNcIik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHsgdmFyIGRlc2MgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDoge307IGlmIChkZXNjLmdldCB8fCBkZXNjLnNldCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyByZXR1cm4gbmV3T2JqOyB9IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciB1c2VyX3Byb2ZpbGVfZmV0Y2hpbmdfdXJsID0gJy9nZXRfdXNlcl9wcm9maWxlJztcbnZhciB1c2VyX3Byb2ZpbGVfdXBkYXRpbmdfdXJsID0gJy9jaGFuZ2VfdXNlcl9zZXR0aW5ncyc7IC8vIGNvbnN0IHVzZXJfcHJvZmlsZV9kZWxldGluZ191cmwgPSAnJztcblxudmFyIFVzZXJQcm9maWxlID0gZnVuY3Rpb24gVXNlclByb2ZpbGUoKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVc2VyUHJvZmlsZSk7XG5cbiAgdGhpcy5pZCA9IDA7XG4gIHRoaXMudXNlcm5hbWUgPSAnJztcbiAgdGhpcy51c2VyRW1haWwgPSAnJztcbiAgdGhpcy51c2VyTmV3UGFzc3dvcmQgPSAnJztcbiAgdGhpcy51c2VyUGljU291cmNlID0gJyc7XG4gIHRoaXMuY29ycmVjdFF1ZXN0aW9uQ291bnQgPSAwO1xuICB0aGlzLmNvbW1lbnRDb3VudCA9IDA7XG4gIHRoaXMudXBsb2FkUXVlc3Rpb25Db3VudCA9IDA7XG4gIHRoaXMudXBsb2FkVGVzdENhc2VDb3VudCA9IDA7XG4gIHRoaXMuZUJ1Y2tzID0gMDtcbiAgdGhpcy5pdGVtcyA9IFtdOyAvLyBhc3N1bWUgaXRlbXMgYXJlIGp1c3QgdGV4dHNcblxuICB0aGlzLmZyaWVuZHMgPSBbXTsgLy8gbGlzdCBvZiBzdHJpbmdcblxuICB0aGlzLmxldmVsID0gMDtcbn07XG5cbnZhciBGcmllbmRzSW5mb0l0ZW0gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgX2luaGVyaXRzKEZyaWVuZHNJbmZvSXRlbSwgX0NvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gRnJpZW5kc0luZm9JdGVtKHByb3BzKSB7XG4gICAgdmFyIF90aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZyaWVuZHNJbmZvSXRlbSk7XG5cbiAgICBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihGcmllbmRzSW5mb0l0ZW0pLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNsaWNrZWQ6IGZhbHNlLFxuICAgICAgcHJvZmlsZTogbnVsbFxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEZyaWVuZHNJbmZvSXRlbSwgW3tcbiAgICBrZXk6IFwiY29tcG9uZW50RGlkTW91bnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHVzZXJuYW1lID0gdGhpcy5wcm9wcy51c2VybmFtZTtcblxuICAgICAgX2F4aW9zLmRlZmF1bHQuZ2V0KHVzZXJfcHJvZmlsZV9mZXRjaGluZ191cmwsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIF90aGlzMi5zZXRTdGF0ZSh7XG4gICAgICAgICAgcHJvZmlsZTogcmVzcG9uc2UuZGF0YVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9maWxlID0gdGhpcy5zdGF0ZS5wcm9maWxlO1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5jbGlja2VkKSB7XG4gICAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIG51bGwsIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgY2xpY2tlZDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgcHJvZmlsZS51c2VybmFtZSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIHByb2ZpbGUubGV2ZWwpKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGxcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImR0XCIsIG51bGwsIFwiQ29ycmVjdCBRdWVzdGlvbnNcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkZFwiLCBudWxsLCBwcm9maWxlLmNvcnJlY3RRdWVzdGlvbkNvdW50KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImR0XCIsIG51bGwsIFwiVXBsb2FkZWQgUXVlc3Rpb25zXCIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGRcIiwgbnVsbCwgcHJvZmlsZS51cGxvYWRRdWVzdGlvbkNvdW50KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImR0XCIsIG51bGwsIFwiVXBsb2FkZWQgVGVzdGNhc2VzXCIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGRcIiwgbnVsbCwgcHJvZmlsZS51cGxvYWRUZXN0Q2FzZUNvdW50KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImR0XCIsIG51bGwsIFwiVW5sb2NrZWQgSXRlbXNcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkZFwiLCBudWxsLCBwcm9maWxlLml0ZW1zLmxlbmd0aCkpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgIGNsaWNrZWQ6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgcHJvZmlsZS51c2VybmFtZSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIG51bGwsIHByb2ZpbGUubGV2ZWwpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZyaWVuZHNJbmZvSXRlbTtcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBGcmllbmRzSW5mbyA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX0NvbXBvbmVudDIpIHtcbiAgX2luaGVyaXRzKEZyaWVuZHNJbmZvLCBfQ29tcG9uZW50Mik7XG5cbiAgZnVuY3Rpb24gRnJpZW5kc0luZm8ocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZyaWVuZHNJbmZvKTtcblxuICAgIF90aGlzNCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihGcmllbmRzSW5mbykuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIF90aGlzNC5zdGF0ZSA9IHtcbiAgICAgIGlzX2ZvbGQ6IHRydWVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpczQ7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRnJpZW5kc0luZm8sIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRoaXMucHJvcHMucHJvZmlsZS5mcmllbmRzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgIHZhciBmcmllbmQgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICBhcnIucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGlcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGcmllbmRzSW5mb0l0ZW0sIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiBmcmllbmRcbiAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ0ZyaWVuZHNJbmZvX2NvbnRlbnQnXG4gICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDNcIiwgbnVsbCwgXCJGcmllbmRzICBcIiwgdGhpcy5zdGF0ZS5pc19mb2xkID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RGb250YXdlc29tZS5Gb250QXdlc29tZUljb24sIHtcbiAgICAgICAgaWNvbjogX2ZyZWVTb2xpZFN2Z0ljb25zLmZhQXJyb3dSaWdodCxcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM1LnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX2ZvbGQ6IGZhbHNlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pIDogX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChfcmVhY3RGb250YXdlc29tZS5Gb250QXdlc29tZUljb24sIHtcbiAgICAgICAgaWNvbjogX2ZyZWVTb2xpZFN2Z0ljb25zLmZhQXJyb3dEb3duLFxuICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczUuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNfZm9sZDogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiLCBudWxsLCBhcnIpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gRnJpZW5kc0luZm87XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG52YXIgSXRlbXNJbmZvID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50Mykge1xuICBfaW5oZXJpdHMoSXRlbXNJbmZvLCBfQ29tcG9uZW50Myk7XG5cbiAgZnVuY3Rpb24gSXRlbXNJbmZvKHByb3BzKSB7XG4gICAgdmFyIF90aGlzNjtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJdGVtc0luZm8pO1xuXG4gICAgX3RoaXM2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKEl0ZW1zSW5mbykuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIF90aGlzNi5zdGF0ZSA9IHtcbiAgICAgIGlzX2ZvbGQ6IHRydWVcbiAgICB9O1xuICAgIHJldHVybiBfdGhpczY7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSXRlbXNJbmZvLCBbe1xuICAgIGtleTogXCJyZW5kZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9maWxlID0gdGhpcy5wcm9wcy5wcm9maWxlO1xuICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTtcbiAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBwcm9maWxlLml0ZW1zW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcDIudmFsdWU7XG4gICAgICAgICAgYXJyLnB1c2goX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxpXCIsIG51bGwsIGl0ZW0pKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybiAhPSBudWxsKSB7XG4gICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnQ29udGVudHNJbmZvX2NvbnRlbnQnXG4gICAgICB9LCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDNcIiwgbnVsbCwgXCJBY2hpZXZlbWVudHMgXCIsIHRoaXMuc3RhdGUuaXNfZm9sZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9mcmVlU29saWRTdmdJY29ucy5mYUFycm93UmlnaHQsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzNy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc19mb2xkOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9mcmVlU29saWRTdmdJY29ucy5mYUFycm93RG93bixcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM3LnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX2ZvbGQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnQ29udGVudHNJbmZvX2Jsb2NrJ1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImg0XCIsIG51bGwsIFwiWW91IGhhdmUgZUJ1Y2tzIGxlZnQ6XCIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLCBudWxsLCBcIiRcIiwgcHJvZmlsZS5lQnVja3MpKSwgcHJvZmlsZS5pdGVtcy5sZW5ndGggPiAwID8gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ0NvbnRlbnRzSW5mb19ibG9jaydcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoNFwiLCBudWxsLCBcIllvdSBoYXZlIHVubG9ja2VkIHRob3NlIGl0ZW1zOlwiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInVsXCIsIG51bGwsIGFycikpIDogbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ0NvbnRlbnRzSW5mb19ibG9jaydcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoNFwiLCBudWxsLCBcIllvdXIgYXJlIGN1cnJlbnRseSBhdCBsZXZlbDpcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsIG51bGwsIHByb2ZpbGUubGV2ZWwpKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEl0ZW1zSW5mbztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBDb3VudHNJbmZvID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50NCkge1xuICBfaW5oZXJpdHMoQ291bnRzSW5mbywgX0NvbXBvbmVudDQpO1xuXG4gIGZ1bmN0aW9uIENvdW50c0luZm8ocHJvcHMpIHtcbiAgICB2YXIgX3RoaXM4O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvdW50c0luZm8pO1xuXG4gICAgX3RoaXM4ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKENvdW50c0luZm8pLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpczguc3RhdGUgPSB7XG4gICAgICBpc19mb2xkOiB0cnVlXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXM4O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENvdW50c0luZm8sIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXM5ID0gdGhpcztcblxuICAgICAgdmFyIHByb2ZpbGUgPSB0aGlzLnByb3BzLnByb2ZpbGU7XG4gICAgICByZXR1cm4gX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ0NvdW50c0luZm9fY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoM1wiLCBudWxsLCBcIlN0YXRpc3RpY3MgXCIsIHRoaXMuc3RhdGUuaXNfZm9sZCA/IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9mcmVlU29saWRTdmdJY29ucy5mYUFycm93UmlnaHQsXG4gICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzOS5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc19mb2xkOiBmYWxzZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KSA6IF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX3JlYWN0Rm9udGF3ZXNvbWUuRm9udEF3ZXNvbWVJY29uLCB7XG4gICAgICAgIGljb246IF9mcmVlU29saWRTdmdJY29ucy5mYUFycm93RG93bixcbiAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM5LnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX2ZvbGQ6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSkpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnQ291bnRzSW5mb19ibG9jaydcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJoNFwiLCBudWxsLCBcIllvdSBoYXZlIGNvcnJlY3RseSBhbnN3ZXJlZCBxdWVzdGlvbnM6XCIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwicFwiLCBudWxsLCBwcm9maWxlLmNvcnJlY3RRdWVzdGlvbkNvdW50KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdDb3VudHNJbmZvX2Jsb2NrJ1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImg0XCIsIG51bGwsIFwiWW91IGhhdmUgbWFkZSBjb21tZW50czpcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsIG51bGwsIHByb2ZpbGUuY29tbWVudENvdW50KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdDb3VudHNJbmZvX2Jsb2NrJ1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImg0XCIsIG51bGwsIFwiWW91IGhhdmUgdXBsb2FkZWQgcXVlc3Rpb25zOlwiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcInBcIiwgbnVsbCwgcHJvZmlsZS51cGxvYWRRdWVzdGlvbkNvdW50KSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdDb3VudHNJbmZvX2Jsb2NrJ1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImg0XCIsIG51bGwsIFwiWW91IGhhdmUgc3VibWl0dGVkIHRlc3RjYXNlczpcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJwXCIsIG51bGwsIHByb2ZpbGUudXBsb2FkVGVzdENhc2VDb3VudCkpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ291bnRzSW5mbztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBVc2VyQmFzaWNJbmZvID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfQ29tcG9uZW50NSkge1xuICBfaW5oZXJpdHMoVXNlckJhc2ljSW5mbywgX0NvbXBvbmVudDUpO1xuXG4gIGZ1bmN0aW9uIFVzZXJCYXNpY0luZm8ocHJvcHMpIHtcbiAgICB2YXIgX3RoaXMxMDtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVc2VyQmFzaWNJbmZvKTtcblxuICAgIF90aGlzMTAgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoVXNlckJhc2ljSW5mbykuY2FsbCh0aGlzLCBwcm9wcykpO1xuICAgIF90aGlzMTAuc3RhdGUgPSB7XG4gICAgICBkaXNwbGF5U2V0dGluZ3M6IGZhbHNlLFxuICAgICAgbmV3UGFzc3dvcmQ6ICcnLFxuICAgICAgbmV3RW1haWw6ICcnXG4gICAgfTtcbiAgICByZXR1cm4gX3RoaXMxMDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhVc2VyQmFzaWNJbmZvLCBbe1xuICAgIGtleTogXCJoYW5kbGVTZXR0aW5nU3VibWl0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNldHRpbmdTdWJtaXQoKSB7XG4gICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgIF9heGlvcy5kZWZhdWx0LnBvc3QodXNlcl9wcm9maWxlX3VwZGF0aW5nX3VybCwge1xuICAgICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS5uZXdQYXNzd29yZCxcbiAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUubmV3RW1haWwsXG4gICAgICAgIHVzZXJfaWQ6IHRoaXMucHJvcHMucHJvZmlsZS5pZFxuICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgX3RoaXMxMS5zZXRTdGF0ZSh7XG4gICAgICAgICAgZGlzcGxheVNldHRpbmdzOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoX3RoaXMxMS5zdGF0ZS5uZXdFbWFpbCAhPT0gJycpIHtcbiAgICAgICAgICBfdGhpczExLnByb3BzLnVwZGF0aW5nX2VtYWlsKF90aGlzMTEuc3RhdGUubmV3RW1haWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgLy8gVE9ETzogdXNlciB0aGVtZSBzZXR0aW5nc1xuICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgdmFyIHByb2ZpbGUgPSB0aGlzLnByb3BzLnByb2ZpbGU7XG4gICAgICBhcnIucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW1nXCIsIHtcbiAgICAgICAgc3JjOiBwcm9maWxlLnVzZXJQaWNTb3VyY2VcbiAgICAgIH0pKTtcblxuICAgICAgaWYgKHRoaXMuc3RhdGUuZGlzcGxheVNldHRpbmdzID09PSBmYWxzZSkge1xuICAgICAgICBhcnIucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDNcIiwgbnVsbCwgcHJvZmlsZS51c2VybmFtZSkpO1xuICAgICAgICBhcnIucHVzaChfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaDRcIiwgbnVsbCwgcHJvZmlsZS51c2VyRW1haWwpKTtcbiAgICAgICAgYXJyLnB1c2goX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczEyLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgZGlzcGxheVNldHRpbmdzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIFwiQ2hhbmdlIEVtYWlsIG9yIFBhc3N3b3JkXCIpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyci5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgXCJMZWF2ZSBibGFuayBhbnkgaW5wdXQgeW91IGRvbid0IHdhbnQgdG8gY2hhbmdlXCIpKTtcbiAgICAgICAgYXJyLnB1c2goX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIiwge1xuICAgICAgICAgIGh0bWxGb3I6ICdzZXR0aW5nc19wYXNzd29yZCdcbiAgICAgICAgfSwgXCJDaGFuZ2UgUGFzc3dvcmRcIiksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7XG4gICAgICAgICAgaWQ6ICdzZXR0aW5nc19wYXNzd29yZCcsXG4gICAgICAgICAga2V5OiAnc2V0dGluZ3NfcGFzc3dvcmQnLFxuICAgICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubmV3UGFzc3dvcmQsXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczEyLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgbmV3UGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgICAgIGFyci5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsIHtcbiAgICAgICAgICBodG1sRm9yOiAnc2V0dGluZ3NfZW1haWwnXG4gICAgICAgIH0sIFwiQ2hhbmdlIFBhc3N3b3JkXCIpLCBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIGlkOiAnc2V0dGluZ3NfZW1haWwnLFxuICAgICAgICAgIGtleTogJ3NldHRpbmdzX2VtYWlsJyxcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubmV3RW1haWwsXG4gICAgICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczEyLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgbmV3RW1haWw6IGUudGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgICAgIGFyci5wdXNoKF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwge1xuICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMxMi5oYW5kbGVTZXR0aW5nU3VibWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBcIlN1Ym1pdFwiKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnVXNlckJhc2ljSW5mb19jb250ZW50J1xuICAgICAgfSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImgyXCIsIG51bGwsIFwiUHJvZmlsZVwiKSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCBhcnIpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVXNlckJhc2ljSW5mbztcbn0oX3JlYWN0LkNvbXBvbmVudCk7XG5cbnZhciBQcm9maWxlUGFuZWwgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9Db21wb25lbnQ2KSB7XG4gIF9pbmhlcml0cyhQcm9maWxlUGFuZWwsIF9Db21wb25lbnQ2KTtcblxuICBmdW5jdGlvbiBQcm9maWxlUGFuZWwocHJvcHMpIHtcbiAgICB2YXIgX3RoaXMxMztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm9maWxlUGFuZWwpO1xuXG4gICAgX3RoaXMxMyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9nZXRQcm90b3R5cGVPZihQcm9maWxlUGFuZWwpLmNhbGwodGhpcywgcHJvcHMpKTtcbiAgICBfdGhpczEzLnN0YXRlID0ge1xuICAgICAgdXNlcl9wcm9maWxlOiBuZXcgVXNlclByb2ZpbGUoKVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzMTM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvZmlsZVBhbmVsLCBbe1xuICAgIGtleTogXCJ1cGRhdGluZ0VtYWlsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0aW5nRW1haWwobmV3RW1haWwpIHtcbiAgICAgIHZhciBwcmV2X3Byb2ZpbGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdGUudXNlcl9wcm9maWxlKSk7XG4gICAgICBwcmV2X3Byb2ZpbGUudXNlckVtYWlsID0gbmV3RW1haWw7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdXNlcl9wcm9maWxlOiBwcmV2X3Byb2ZpbGVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb21wb25lbnREaWRNb3VudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBfdGhpczE0ID0gdGhpcztcblxuICAgICAgdmFyIHVzZXIgPSB0aGlzLnByb3BzLnVzZXI7XG5cbiAgICAgIF9heGlvcy5kZWZhdWx0LmdldCh1c2VyX3Byb2ZpbGVfZmV0Y2hpbmdfdXJsLCB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VyXG4gICAgICAgIH1cbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VyIHByb2ZpbGUgaXMgJywgcmVzcG9uc2UuZGF0YSk7XG5cbiAgICAgICAgX3RoaXMxNC5zZXRTdGF0ZSh7XG4gICAgICAgICAgdXNlcl9wcm9maWxlOiByZXNwb25zZS5kYXRhXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgIHZhciB1c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgcmV0dXJuIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICdQcm9maWxlUGFuZWxfY29udGVudCdcbiAgICAgIH0sIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoVXNlckJhc2ljSW5mbywge1xuICAgICAgICBwcm9maWxlOiB0aGlzLnN0YXRlLnVzZXJfcHJvZmlsZSxcbiAgICAgICAgdXBkYXRpbmdfZW1haWw6IGZ1bmN0aW9uIHVwZGF0aW5nX2VtYWlsKHZhbCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczE1LnVwZGF0aW5nRW1haWwodmFsKTtcbiAgICAgICAgfVxuICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQ291bnRzSW5mbywge1xuICAgICAgICBwcm9maWxlOiB0aGlzLnN0YXRlLnVzZXJfcHJvZmlsZVxuICAgICAgfSksIF9yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoSXRlbXNJbmZvLCB7XG4gICAgICAgIHByb2ZpbGU6IHRoaXMuc3RhdGUudXNlcl9wcm9maWxlXG4gICAgICB9KSwgX3JlYWN0LmRlZmF1bHQuY3JlYXRlRWxlbWVudChGcmllbmRzSW5mbywge1xuICAgICAgICBwcm9maWxlOiB0aGlzLnN0YXRlLnVzZXJfcHJvZmlsZVxuICAgICAgfSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm9maWxlUGFuZWw7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm9maWxlUGFuZWw7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb2ZpbGVQYW5lbC5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./modules/ProfilePanel.js\n");

/***/ })

}]);